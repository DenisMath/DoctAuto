\documentclass[a4paper,12pt]{article}
\usepackage{a4wide}
\usepackage[cp1251]{inputenc}
\usepackage[english,russian,ukrainian]{babel}
\usepackage{amsfonts,amssymb,amsmath,amsthm,amscd,latexsym}
\usepackage{graphicx}
\usepackage[matrix,arrow,curve]{xy}
%\pagestyle{headings}
\usepackage{fancyhdr}
\fancyfoot{} \rhead{\thepage} \cfoot{} \lhead{}
\renewcommand{\headrulewidth }{ 0pt}
\pagestyle{fancy} \sloppy
\parindent = 1 cm
\topmargin - 16mm \textwidth  160mm \textheight 250mm
\oddsidemargin 10mm \evensidemargin 7mm
\newcommand*{\hm}[1]{#1\nobreak\discretionary{}%
{\hbox{$\mathsurround=0pt #1$}}{}}
\newcommand{\bb}[1]{{\bf #1}}
\renewcommand{\theequation}{\thesection.\arabic{equation}}
\numberwithin{equation}{subsection}
\newtheorem{theorem}{Теорема}[subsection]
\newtheorem{lemma}{Лема}[subsection]
\newtheorem{corollary}{Наслідок}[subsection]
\newtheorem{remark}{Зауваження}[subsection]
\newtheorem{definition}{Означення}[subsection]
\newtheorem{example}{Приклад}[subsection]
\newtheorem{hyp}{Гіпотеза}[subsection]
\renewcommand{\baselinestretch}{1.5}

\begin{document}

\begin{titlepage}
\vspace*{0.2cm}
\begin{center}
Національний Університет "Києво-Могилянська Академія"
\end{center}
\vspace{0.6cm}
\begin{flushright}
На правах рукопису
\end{flushright}
\vspace{1cm}
\begin{center}
Морозов Денис Іванович
\end{center}
%
\begin{flushright}
УДК 512.54
\end{flushright}
%
%
\begin{center}
\textbf{Скінченностанова спряженість
 ізометрій простору 2-адичних чисел}

\vspace{0.5cm}

01.01.06 -- алгебра та теорія чисел
\end{center}
%
%
\vspace{1 cm}
\begin{center}
Дисертація на здобуття наукового ступеня \\ доктора  фізико--математичних наук \\
\end{center}

\vspace{8 cm}


\begin{center}
Київ--2008
\end{center}
\end{titlepage}

\setcounter{page}{2}
\tableofcontents
\newpage
\section*{Перелік умовних позначень}
\addcontentsline{toc}{section}{Перелік умовних позначень}
\bigskip
\begin{tabular}{ p{2.4in} p{3.5in} }
\
$\mathbb{N}^+$ & - напівгрупа натуральних чисел  по додаванню ; \\
$\bar{\mathbb{N}}^+ = \mathbb{N}^+ \cup \{ 0 \}$ & - напівгрупа натуральних чисел з нулем; \\
$Z_p$ & -кільце цілих p-адичних чисел;\\
$Z_T$ & -кільце розширених по дереву $T$ цілих 2-адичних чисел ;\\
$C_n^{(r)} $& -декартів добуток $r$ копій циклічної групи $C_n$;  \\




$G \ltimes H $ & - напівпрямий добуток груп , де $H-$ нормальний дільник ; \\
$\left(G,X \right) \imath  H $ & -вінцевий добуток групи перетворень $\left(G,X \right)\ $(активний співмножник) та
абстрактної групи $H$; \\


$<M,g,\ldots > $ &- підгрупа породжена множиною $M$ та елементами $g,\ldots $; \\
$K^+, K^* $ & - адитивна та мультиплікативна групи поля ; \\

\end{tabular}

\begin{tabular}{ p{2in} p{3.5in} }








$\circ$& -суперпозиція автоморфізмів, функцій. \\
$T_n $&- кореневе однорідне дерево валентності $n$ ;\\
$AutT_n $&- група автоморфізмів кореневого однорідного дерева валентності $n$ ;\\
$FAutT_n $&- підгрупа скінченностанових автоморфізмів групи  $AutT_n $;\\
$STAutT_n $&- Множина шарово-транзитивних автоморфізмів групи  $AutT_n $;\\
$\zeta(a) $&- кількість різних станів автоморфізму a ;\\

$C_G(a)$&- централізатор елемента $a$ в групі $G$;\\
\end{tabular}
\newpage

\bigskip
\section{Ізометрії кільця $Z_2$}
Зручною для роботи з двійковими автоматами, особливо з нескінченно-становими, є техніка їх представлення у вигляді функцій кільця $Z_2$.
% В данній статті наводиться індуктивна побудова класу функцій  кільця $Z_2$, що є стискаючими.
%  В цьому класі виділяється підможина, що відповідає ізометріям, а отже груповим автоматам. 

 Ототожнюючи кодування елементів простору Бера над двійковим алфавітом з двійковим кодуванням цілих
2-адичних чисел отримаємо представлення автоморфізма функцією на
$Z_2$. Кожен автоморфізм дерева $\alpha$ задає
функцію $f_\alpha$ за правилом: якщо автоморфізм $\alpha$ переводить кінець x в кінець
y, то $f_\alpha(x)=y$. Наприклад $adding \  machine$ при такому представленні
задається функцією $f(x)=x+1$.


Але не кожна функція є автоморфізмом дерева. Для
того, що б функція задавала автоморфізм необхідно, що б ця функція
пару кінців з однаковим початком переводила в пару кінців з
однаковим початком тієї ж самої довжини.
\begin{example}
Функція $f(x)=2x$
переводить пару ...1111 та ...0000 в пару ...1110 та ...0000
відповідно. Перша пара має спільний початок довжини 0, друга  -
довжини 1, тобто функція  $f(x)=2x$ не є автоморфізмом дерева.
\end{example}
\begin{example}
Функція $f(x)=x^2$ не є автоморфізмом дерева.

Дійсно, оскільки має місце наступне співвідношення $$(2^n\cdot t+x)^2=2^{2n}\cdot t^2+2\cdot 2^n\cdot x\cdot
t+x^2$$ тобто $$(2^n\cdot t_1+x)^2-(2^n\cdot t_2+x)^2=$$ $$=(2^{2n}\cdot t_1^2+2\cdot 2^n\cdot x\cdot
t_1+x^2)-(2^{2n}\cdot t_2^2+2\cdot 2^n\cdot x\cdot t_2+x^2)=$$$$= 2^{n+1}(t_2-t_1)(2^{n-1}(t_2+t_1)+1)$$ то для
пари 2-адичних чисел $x_1,x_2$, що мають спільний початок ненульової довжини n, пара $x_1^2,x_2^2$ має спільний
початок довжини як найменше довжини n+1
 отже
відображення $f(x)=x^2$ є неперервним, але не є автоморфізмом.
\end{example}

Втім клас функцій, що є автоморфізмами дерева є досить широким. Далі наводиться індуктивна побудова класу функцій  кільця $Z_2$, що є стискаючими. В цьому класі виділяється підможина, що відповідає ізометріям, а отже груповим автоматам. 

\subsection{Стискаючи функції кільця $Z_2$}
Означимо метрику $\rho$ на кільці $Z_2$. Кожен елемент $x\in Z_2$ можна єдиним чином представити у вигляді $x=u*2^n$, де $u$ - обертовний елемент кільця $Z_2$.

Далі під фразою $a\in Z_2$ ділиться на $b \in Z_2$, будемо розуміти, що $\frac{a}{b}$ належить кільцю $Z_2$.
\begin{definition}

Функція $ord_2(x)$ для $x\in Z_2$ означається наступним чином. Нехай  $x=u*2^n$, де $u$ - обертовний елемент кільця $Z_2$. Тоді $ord_2(x)=n$.
  \end{definition}

  \begin{definition}
  Означимо відстань $\rho(x,y)$ для $x,y \in Z_2$. $$\rho(x,y)=\left(\frac{1}{2}\right)^{ord_2(x-y)}$$
\end{definition}

\begin{definition}
 Функція $f:Z_2\rightarrow Z_2$ називається ізометрією, якщо $$\rho(f(x),f(y))=\rho(x,y)$$

 Множину ізометрій позначимо як $AutZ_2$.
 \end{definition}



\begin{definition}
 Ізометрія $f:Z_2\rightarrow Z_2$ називається шарово-транзитивною, якщо $\forall n\in \mathbb{N} $ $f^k(0)$ має $2^n$ різних значень по модулю $2^n$. Множину шарово-транзитивних ізометрій позначимо, як $STAutZ_2$
  \end{definition}

  \begin{lemma} \label{lemmaizo}Функція $f$ є ізометрією тоді, і тільки тоді, коли  дріб $\frac{f(x)-f(y)}{x-y}$ належить групі одиниць кільця $Z_2$ для всіх $x,y \in Z_2$.
 \end{lemma}
 \begin{proof}
 Представимо $f(x)-f(y) $ та $x-y $ у вигляді: $f(x)-f(y)=u_1*2^{n_1}$, $ x-y=u_2*2^{n_2}$, де - $u_1,u_2$ обертовні елементи кільця $Z_2$. Оскільки $f$ - ізометрія, то $n_1=n_2$. Отже маємо:$$\frac{f(x)-f(y)}{x-y}=\frac{u_1}{u_2}=u_1*u_2^{-1}$$ тобто дріб належить групі одиниць кільця $Z_2$.

 З іншої сторони, якщо  для всіх $x,y \in Z_2$ добуток $2^{n_1-n_2}*u_1*u_2^{-1}$ належить групі одиниць кільця $Z_2$, то $n_1=n_2$, тому $f$ - ізометрія. 


  \begin{definition}
 Функція $f:Z_2\rightarrow Z_2$ називається стискаючою, якщо $$\rho(f(x),f(y))\leqslant \rho(x,y)$$

 Множину стискаючих функцій позначимо як  $EndZ_2$.
 \end{definition}

 \end{proof}
 \begin{definition}
 Функція $f:Z_2\rightarrow Z_2$ називається строго-стискаючою, якщо $$\rho(f(x),f(y))< \rho(x,y)$$

 Множину строго-стискаючих функцій позначимо як  $CEndZ_2$.
 \end{definition}





  \begin{remark}

 Нехай різниця $x-y$  ділиться на $2^n \ (n \in \mathbb{N})$. Тоді те що функція $f(x)$ є

 a) ізометрією, рівносильно умові: $f(x)-f(y)$ ділиться на $2^n$, але не ділиться на $2^{n+1}$ (дріб $\frac{f(x)-f(y)}{x-y}$ належить групі одиниць кільця $Z_2$)

 b) строго-стискаючою,  рівносильно умові:  $f(x)-f(y)$ ділиться на $2^{n+1}$(дріб $\frac{f(x)-f(y)}{x-y}$ належить $2*Z_2$)

 c) стискаючою,  рівносильно умові:  $f(x)-f(y)$ ділиться на $2^{n}$ (дріб $\frac{f(x)-f(y)}{x-y}$ належить $Z_2$)
  \end{remark}

   \begin{remark}
 Легко бачити, що об'єднання множини ізометрій з множиною строго стискаючих функцій є власною підмножиною множини стискаючих функцій.

  \end{remark}




 \begin{theorem}Якщо $f$ - стискаюча, $g$ - стискаюча, то $f+g$ - стискаюча.
 \end{theorem}
  \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Розглянемо різницю
  $$(f(x)+g(x))-(f(y)+g(y))=$$ $$=(f(x)-f(y))+(g(x)-g(y))$$
 Друга частина рівності складається з двох доданків. Перший доданок ділиться на $2^n$, другий доданок також ділиться на $2^{n}$, оскільки $f$ та $g$ - стискаючи функції. Отже вся сума ділиться на $2^n$ і звідси маємо, що $f+g$ є стискаючою функцією.
 \end{proof}


  \begin{theorem}Якщо $f$ - ізометрія, $g$ - строго стискаюча, то $f+g$ - ізометрія
 \end{theorem}
  \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Розглянемо різницю
  $$(f(x)+g(x))-(f(y)+g(y))=$$ $$=(f(x)-f(y))+(g(x)-g(y))$$
 Друга частина рівності складається з двох доданків. Перший доданок ділиться на $2^n$, але не ділиться на $2^{n+1}$ , другий доданок ділиться на $2^{n+1}$, оскільки $f$ - ізометрія, а $g$ - строго стискаюча функція. Отже вся сума ділиться на $2^n$, але не ділиться на $2^{n+1}$ і звідси маємо, що $f+g$ є ізометрією.
 \end{proof}


  \begin{theorem}Якщо $f$ - строго стискаюча, $g$ - строго стискаюча, то $f+g$ - строго стискаюча
 \end{theorem}

  \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Розглянемо різницю
  $$(f(x)+g(x))-(f(y)+g(y))=$$ $$=(f(x)-f(y))+(g(x)-g(y))$$
 Друга частина рівності складається з двох доданків. Перший доданок ділиться на $2^{n+1}$ , другий доданок ділиться на $2^{n+1}$, оскільки $f$ та $g$ - строго стискаючи функції. Отже вся сума ділиться на $2^{n+1}$,  і звідси маємо, що $f+g$ є строго стискаючою функцією.
 \end{proof}

  \begin{theorem} Якщо $f$ - ізометрія, $g$ - ізометрія, то  $f+g$ - строго стискаюча
 \end{theorem}

  \begin{proof}
$$\frac{(f(x)+g(x))-(f(y)+g(y))}{x-y} = \frac{f(x)-f(y)}{x-y} + \frac{g(x)- g(y)}{x-y} = a_1 + a_2$$
$$ a_1 =  \frac{f(x)-f(y)}{x-y},\  a_2 =  \frac{g(x)- g(y)}{x-y}$$
Оскільки $f$ та $g$ - ізометрії, то $a_1$ та $a_2$ належать множині обертовних елементів кільця $Z_2$  для всіх $x,y \in Z_2$. Отже
$a_1 + a_2$ ділиться на 2 для всіх $x,y \in Z_2$ і тому $f+g$ - строго стискаюча функція.
 \end{proof}






 \begin{corollary}

 Якщо $f$, $g$ та $h$ - ізометрії, то то $f+g+h$ - ізометрія
 \end{corollary}
 Дійсно, оскільки за теоремою $ $ $g+h$ - строго стискаюча, а $f$- ізометрія, то за теоремою $ $ $f+(g+h)$ - ізометрія.

 \begin{theorem}
 Якщо $f$ - стискаюча, то $2*f$ - строго стискаюча функція.
 \end{theorem}

  \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Тоді $f(x)-f(y)$ також ділиться на $2^n$, оскільки $f$ є стискаючою. Розглянемо різницю
  $$ 2*f(x)-2*f(y)= 2*(f(x)-f(y))$$
 Друга частина рівності ділиться на $2^{n+1}$, отже маємо, що $2*f$ є строго стискаючою функцією.
 \end{proof}

  \begin{theorem}Якщо $f$ - стискаюча, $g$ - стискаюча, то $f*g$ - стискаюча.
 \end{theorem}

 \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Тоді різниці $f(x)-f(y)$ та $g(x)-g(y)$ обидві діляться на $2^{n}$, оскільки $f$ та $g$ - стискаючи функції.

 Розглянемо різницю
  $$f(x)*g(x)-f(y)*g(y)=$$ $$=f(x)*(g(x)-g(y))+g(y)(f(x)-f(y))$$
 Друга частина рівності складається з двох доданків. Обидві доданки діляться на $2^{n}$. Отже вся сума ділиться на $2^{n}$ і звідси маємо, що $f*g$ є стискаючою функцією.
 \end{proof}

  \begin{theorem}Якщо $f$ - строго стискаюча, $g$ - строго стискаюча, то $f*g$ - строго стискаюча.
 \end{theorem}

 \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Тоді різниці $f(x)-f(y)$ та $g(x)-g(y)$ обидві діляться на $2^{n+1}$, оскільки $f$ та $g$ - строго стискаючи функції.

 Розглянемо різницю
  $$f(x)*g(x)-f(y)*g(y)=$$ $$=f(x)*(g(x)-g(y))+g(y)(f(x)-f(y))$$
 Друга частина рівності складається з двох доданків. Обидві доданки діляться на $2^{n+1}$. Отже вся сума ділиться на $2^{n+1}$ і звідси маємо, що $f*g$ є строго стискаючою функцією.
 \end{proof}

  \begin{theorem}  \label{product} Нехай $f$ - ізометрія, а $g$ - стискаюча функція.

  Тоді $f*(2*g+1)$ - ізометрія
 \end{theorem}

 \begin{proof} Нехай різниця $x-y$  ділиться на $2^n$, але не ділиться на $2^{n+1}$. Тоді різниці $f(x)-f(y)$ та $g(x)-g(y)$ обидві діляться на $2^n$, але не діляться на $2^{n+1}$, оскільки $f$ та $g$ - ізометрії.

 Розглянемо різницю
  $$f(x)*(2*g(x)+1)-f(y)*(2*g(y)+1)=$$ $$=2*f(x)*(g(x)-g(y))+(2*g(y)+1)*(f(x)-f(y))$$
 Друга частина рівності складається з двох доданків. Перший доданок ділиться на $2^{n+1}$, другий доданок ділиться на $2^n$, але не ділиться на $2^{n+1}$ . Отже вся сума ділиться на $2^n$, але не ділиться на $2^{n+1}$ і звідси маємо, що $f*(2*g+1)$ є ізометрією.
 \end{proof}

  \begin{corollary}
 Нехай $f$ - ізометрія, а $g$ - ізометрія, або строго стискаюча. Тоді $f*(2*g+1)$ - ізометрія
 \end{corollary}

 Дійсно, і ізометрія і строго стискаюча функція є стискаючими.

 \begin{theorem} \label{product1} Нехай  функції $f$ та $g$ є стискаючими.

    Тоді $2*f*g$ - строго стискаюча функція
 \end{theorem}
 \begin{proof} Розглянемо різницю:
   $$\frac{2f(x)*g(x)}{x-y} - \frac{2f(y)*g(y)}{x-y} = \frac{2((f(x)-f(y))g(x) + f(y)(g(x)-g(y)))}{x-y}= $$
$$= 2g(x)*a_1 + 2f(y)*a_2$$
$$ a_1 =  \frac{f(x)-f(y)}{x-y},\  a_2 =  \frac{g(x)- g(y)}{x-y}$$
Оскільки $f$ та $g$ - стискаючи, то $a_1$ та $a_2$ належать  $Z_2$  для всіх $x,y \in Z_2$.
Отже
$2g(x)*a_1 + 2f(y)*a_2$ ділиться на 2 для всіх $x,y \in Z_2$ і тому $2*f*g$ - строго стискаюча функція.
 \end{proof}
  \begin{corollary}
 Нехай $f$ - ізометрія, або строго стискаюча функція, $g$ - ізометрія, або строго стискаюча функція. Тоді $2*f*g$ - строго стискаюча функція.
 \end{corollary}



  \begin{theorem} \label{divide} Якщо $f$ - ізометрія,  а  $g$  - стискаюча функція, то $$\frac{f}{2*g+1}$$ - ізометрія.
 \end{theorem}
 \begin{proof}
  Розглянемо різницю:
$$\frac{f(x)}{2g(x)+1} - \frac{f(y)}{2g(y)+1} = \frac{2(f(x)g(y)-f(y)g(x))+f(x)-f(y)}{(2g(x)+1)(2g(y)+1)}$$
Знаменник не впливає на парність дробу, оскільки є добутком обертовних елементів кільця $Z_2$.

 Розглянемо відношення:
 $$\frac{2(f(x)g(y)-f(y)g(x))+f(x)-f(y)}{x-y} =$$ $$= \frac{2((f(x)-f(y))g(y)-f(y)(g(x)-g(y)))+(f(x)-f(y))}{x-y}= $$
$$= \frac{2(f(x)-f(y))g(y)}{x-y}-\frac{2f(y)(g(x)-g(y))}{x-y}+\frac{f(x)-f(y)}{x-y} =$$$$= (2g(y)+1)*a_1 - 2f(y)*a_2 $$
$$ a_1 =  \frac{f(x)-f(y)}{x-y},\  a_2 =  \frac{g(x)- g(y)}{x-y}$$

Оскільки $f$ - ізометрія,  а  $g$  - стискаюча функція, то  $a_1$ належить множині обертовних елементів кільця $Z_2$, а $a_2$ належить  $Z_2$   для всіх $x,y \in Z_2$. Отже $$(2g(y)+1)*a_1 - 2f(y)*a_2 $$
 належить множині обертовних елементів кільця $Z_2$, і тому $\frac{f}{2*g+1}$ - ізометрія.
 \end{proof}

  \begin{corollary}
 Нехай $f$ - ізометрія, а $g$ - ізометрія, або строго стискаюча. Тоді $\frac{f}{2*g+1}$ - ізометрія
 \end{corollary}




 \begin{theorem}Якщо $f$ - строго стискаюча функція, $g$ - строго стискаюча функція, то суперпозиція $f\circ g=g(f(x))$ - строго стискаюча функція.
 \end{theorem}
 \begin{proof}
    Покажемо, що $$\frac{g(f(x))-g(f(y))}{x-y}$$ ділиться на 2 для всіх $x,y \in Z_2$.

 $$\frac{g(f(x))-g(f(y))}{x-y}=\frac{f(x)-f(y)}{x-y}*\frac{g(f(x))- g(f(y))}{f(x)-f(y)}$$
 Друга частина рівності складається з добутку двох дробів. Перший дріб ділиться на 2, оскільки $f$ - строго стискаюча функція. Другий дріб також  ділиться на 2, оскільки $g$ - строго стискаюча функція. Отже, добуток ціх дробів теж належить групі одиниць кільця $Z_2$, і тому суперпозиція $f\circ g=g(f(x))$ є строго стискаючою функцією.
 \end{proof}
  \begin{theorem} Якщо $f$ - ізометрія, $g$ - ізометрія, то суперпозиція $f\circ g=g(f(x))$ - ізометрія.

  \begin{proof} 

 Скористаємось лемою $\ref{lemmaizo}$. Покажемо, що $$\frac{g(f(x))-g(f(y))}{x-y}$$ належить групі одиниць кільця $Z_2$ для всіх $x,y \in Z_2$.

 $$\frac{g(f(x))-g(f(y))}{x-y}=\frac{f(x)-f(y)}{x-y}*\frac{g(f(x))-g(f(y))}{f(x)-f(y)}$$
 Друга частина рівності складається з добутку двох дробів. Перший дріб належить групі одиниць кільця $Z_2$, оскільки $f$ - ізометрія. Другий дріб також належить групі одиниць кільця $Z_2$, оскільки $g$ - ізометрія. Отже, добуток ціх дробів теж належить групі одиниць кільця $Z_2$, і тому суперпозиція $f\circ g=g(f(x))$ є ізометрією.
 \end{proof}
 \end{theorem}
Наслідком попередніх теорем є наступні три теореми:
  \begin{theorem}Стискаючи функції на кільці $Z_2$ утворюють кільце з мультиплікативною одиницею $f(x)=x$ відносно операцій поелементного додавання та множення функцій. Множина стискаючих функцій з операцією додавання утворює адитивну групу цього кільця.
 \end{theorem}

 \begin{theorem}Строго стискаючи функції на кільці $Z_2$ утворюють кільце без одиниці відносно операцій поелементного додавання та множення функцій. Множина строго стискаючих функцій з операцією додавання утворює адитивну групу цього кільця.
 \end{theorem}
 \begin{theorem} Множина ізометрій кільця $Z_2$ є класом суміжності по підгрупі строго стискаючих функцій відносно операції поелементного додавання в групі стискаючих функцій.
 \end{theorem}
Наступна теорема потрібна для продовження натуральних функцій до 2-адичних ізометрій.
  \begin{theorem} \label{Uniq} Ізометрія $\chi$, визначена на всюди щільній в $Z_2$ підмножині M, єдиним чином продовжується до ізометрії $\overline{\chi}$ на $Z_2$.
 \end{theorem}
 \begin{proof}
   Оскільки ізометрія є неперевною функцією, а множина M є всюду щільною в $Z_2$, то для елемента $x \notin M$ значення $\overline{\chi}(x)$ визначено єдиним чином, як $$\overline{\chi}(x) = \lim_{n\rightarrow \infty}\chi(x_n)$$ де 
$\{x_n\}$ послідовність елементів із $M$, збіжна к $x$ в $Z_2$.

 На множині $M$ функція $\overline{\chi}$ співпадає з $\chi$.
 \end{proof}

  \begin{theorem} Шарово-транзитивна функція $f:Z_2\rightarrow Z_2$ є ізометрією тоді і лише тоді, коли оператор примитивної рекурсії $g(x)=I[f](x) (g(0)=0, g(x+1) = f(g(x)))$ від функції $f(x): \mathbb{N}\rightarrow \mathbb{N}$ дає функцію $g$, неперервне продовження якої на $Z_2$ є ізометрією кільця $Z_2$.
 \end{theorem}
 \begin{proof}
 Якщо $f$ -шарово-транзитивна ізометрія, то $I[f](x)$ є 0-розв'язком(0-розв'язок - розв'язок, що переводить 0 в 0) рівняння спряженності $\varepsilon^{\chi}=f$
 Дійсно, якщо $\chi(0)=0$, то $\chi(n)=f^n(0)$ для $x \in \mathbb{N}$. Звідси $\chi(n+1)=f(f^n(0))=f(\chi(n))$ і $\chi(x)=I[f](x)(x\in \ \mathbb{N})$.
 Оскільки $\mathbb{N}$ всюди щільна в $Z_2$, то, згідно з теоремою $\ref{Uniq}$ існує єдине продовження ізометрії $\chi:\mathbb{N}\rightarrow \mathbb{N}$ до ізометрії $\chi:Z_2\rightarrow Z_2$.

 З іншого боку, якщо ізометрія $f$ не є шарово-транзитивною, то замикання множини $M=\{x|x=f^n(0), n \in \mathbb{N}\}$ є власною підмножиною $Z_2$, тобто $\chi$ не є сюр'єктивним відображеням з $Z_2$ на $Z_2$, і тому не є ізометрією.
 \end{proof}

\begin{example} Легко бачити, що, $f(x)=x$ є ізометрією, а $g(x)=c, c \in Z_2$ строго стискаючою функцією. Тому, згідно з теоремою  $f(x)+g(x)=x+c,\ c \in Z_2$ є ізометрією.
 \end{example}

 \begin{example}
 Оскільки $ f(x)=x+c, \ c \in Z_2 $ є ізометрією, а для $c \in Z_2^{*} $ $\ f(x)=x+c$ є шарово-транзитивною ізометрією і $I[x+c](x)=c*x$ то, згідно з теоремою  $g(x)=c*x \ (c \in Z_2^{*})$ є ізометрією.
  \end{example}

  \begin{example} Оскільки $f(x)=a*x \ (a \in Z_2^*)$ є ізометрією, а $g(x)=b, b \in Z_2$ строго стискаючою функцією, то, згідно з теоремою  лінійна функція $f(x)+g(x)=a*x+b,\ c \in Z_2$ є ізометрією.
 \end{example}
 

 \subsection{Ізометричні многочлени кільця $Z_2$}
 Розглянемо многочлени кільця $Z_2[x]$. У цьому розділі буде сформульовано умови, при яких многочлен $f(x)=a_0+a_1x+a_2x^2+...+a_nx^n$ буде ізометрією кільця $Z_2$.
 Означимо $S_n(x_1,x_2)$, як  $$S_n(x_1,x_2)=\sum_{k=0}^{n-1} x_1^{n-k-1}\cdot x_2^k $$

 \begin{example}  $S_2(x_1,x_2)=x_1+x_2$, $S_3(x_1,x_2)=x_1^2+x_1\cdot x_2+x_2^2\ $ і т.д.
 \end{example}
 \begin{definition}  Означимо функцію $\mu(x)=\overline{x}$:

$$
\mu(x)=\begin{cases}
0, x\in 2\cdot Z_2\\

1,x\in Z_2^*
\end{cases}
$$
 \end{definition}



 \begin{theorem}
 $\overline{S_{2k}}(x_1,x_2)=\overline{x_1}\oplus \overline{x_2}$
 \end{theorem}
 \begin{proof}
 $S_{2k}$ складається з с парної кількості доданків, кожен з яких буде непарним,  якщо $x_1$ та $x_2$ непарні. Тому  $S_{2k}$ є парним, якщо $x_1$ та $x_2$ непарні. Очевидно, що $S_{2k}$ є парним, якщо $x_1$ та $x_2$ є парними. Крім того $S_{2k}=x_1+S_{2k-1}\cdot x_2=S_{2k-1}\cdot x_1+x_2$, тому $S_{2k}$ є непарним, якщо $x_1$ та $x_2$ - різної парності. Отже таблиця значень для $\overline{S_{2k}}(x_1,x_2)$ співпадає з таблицею істинності для $\overline{x_1}\oplus \overline{x_2}$.
 \end{proof}
 \begin{theorem}
 $\overline{S_{2k+1}}(x_1,x_2)=\overline{x_1}\cup \overline{x_2}$
 \end{theorem}

 \begin{proof}
 $S_{2k+1}$ складається з с непарної кількості доданків, кожен з яких буде непарним,  якщо $x_1$ та $x_2$ непарні. Тому  $S_{2k}$ є непарним, якщо $x_1$ та $x_2$ непарні. Очевидно, що $S_{2k}$ є парним, якщо $x_1$ та $x_2$ є парними. Крім того $S_{2k}=x_1+S_{2k-1}\cdot x_2=S_{2k-1}\cdot x_1+x_2$, тому $S_{2k}$ є непарним, якщо $x_1$ та $x_2$ - різної парності. Отже таблиця значень для $\overline{S_{2k+1}}(x_1,x_2)$ співпадає з таблицею істинності для $\overline{x_1}\cup \overline{x_2}$.
 \end{proof}
  \begin{definition}
 $$D_f(x_1,x_2)=\frac{f(x_1)-f(x_2)}{x_1-x_2}$$
 \end{definition}
 \begin{lemma}
 Для многочлена $f(x)=a_0+a_1x+a_2x^2+...+a_nx^n$ має місце рівність $$D_f(x_1,x_2)=\sum_{k=1}^n S_k(x_1,x_2)$$
 \end{lemma}
 \begin{theorem}\label{izomumov1}
 Многочлен $f(x)\in Z_2[x]$ є ізометрією тоді, і тільки тоді, коли $$\forall\ x_1,x_2 \in Z_2\  \overline{D_f}(x_1,x_2)=1$$
 \end{theorem}
 \begin{definition}
 Для многочлена $f(x)=a_0+a_1x+a_2x^2+...+a_nx^n$ означимо $A_f$ та $B_f$:
 $$ A_f=\mu \left(\sum_{k=1}^{[\frac{n+1}{2}]}a_{2k}\right)$$
 $$ B_f=\mu \left(\sum_{k=2}^{[\frac{n+1}{2}]}a_{2k-1}\right)$$
  \end{definition}
  \begin{theorem}\label{rivnist} Має місце наступна рівність:
 $$\overline{D_f}(x_1,x_2)=\overline{a_1}\oplus (A_f\cap (x_1\oplus x_2))\oplus (B_f\cap (x_1\cup x_2))$$
  \end{theorem}
  \begin{corollary}\label{naslidok1} Згідно з теоремами \ref{izomumov1} та \ref{rivnist} многочлен $f(x)=a_0\hm+a_1x\hm+a_2x^2\hm+...\hm+a_nx^n$ є ізометрією тоді, і тільки тоді, коли формула $\overline{a_1}\hm\oplus (A_f\hm\cap (x_1\hm\oplus x_2)\hm)\oplus (B_f\hm\cap (x_1\hm\cup x_2))$ є тотожньо-істиною.
   \end{corollary}
   \begin{theorem}\label{istformul}  $\overline{a_1}\oplus (A_f\cap (x_1\oplus x_2))\oplus (B_f\cap (x_1\cup x_2))$ є тотожньо-істиною тоді, і тільки тоді, коли $\overline{a_1}=1,\ A_f=0,\ B_f=0$
  \end{theorem}
  \begin{proof} Побудуємо табличку вигляду формули $\overline{a_1}\oplus (A_f\cap (x_1\oplus x_2))\oplus (B_f\cap (x_1\cup x_2))$ для різних значень $\overline{a_1},\ A_f,\ B_f$.

  \begin{center}



  \begin{tabular}{|c|c|}
\hline
$ \overline{a_1}=0,\ A_f=0,\ B_f=0$ & 0\\
\hline

$ \overline{a_1}=0,\ A=0,\ B_f=1$ & $x_1\cup x_2$\\
\hline

$ \overline{a_1}=0,\ A_f=1,\ B_f=0$ & $x_1\oplus x_2$\\
\hline

$ \overline{a_1}=0,\ A_f=1,\ B_f=1$ & $(x_1\oplus x_2)\oplus (x_1\cup x_2)$\\
\hline

$ \overline{a_1}=1,\ A_f=0,\ B_f=0$ & 1\\
\hline

$ \overline{a_1}=1,\ A_f=0,\ B_f=1$ & $\neg(x_1\cup x_2)$\\
\hline

$ \overline{a_1}=1,\ A_f=1,\ B_f=0$ & $\neg(x_1\oplus x_2)$\\
\hline

$ \overline{a_1}=1,\ A_f=1,\ B_f=1$ & $\neg((x_1\oplus x_2)\oplus (x_1\cup x_2))$\\
\hline


\end{tabular}

\end{center}

Таблиці істинності формул $x_1\cup x_2$, $x_1\oplus x_2$ та $(x_1\oplus x_2)\oplus (x_1\cup x_2)$ мають наступний вигляд:


\begin{center}
\begin{tabular}{|c|c|c|c|c|}

\hline
$x_1$  &  $x_2$ & $x_1\oplus x_2$  & $x_1\cup x_2$&  $(x_1\oplus x_2)\oplus (x_1\cup x_2)$\\
\hline

0 & 0 & 0  & 0&  0\\
\hline
0 & 1 & 1  & 1&  0\\
\hline
1 & 0 & 1  & 1&  0\\
\hline
1 & 1 & 0  & 1&  1\\
\hline
\end{tabular}
 \end{center}

Отже формула є тотожньо-хибною для $ \overline{a_1}=0,\ A_f=0,\ B_f=0$, тотожньо-істиною для $ \overline{a_1}=1,\ A_f=0,\ B_f=0$ і виконливою у всіх інших випадках.
  \end{proof}
   \begin{corollary}\label{naslidok2} Згідно з наслідком \ref{naslidok1} та теоремою \ref{istformul} многочлен $f(x)=a_0\hm+a_1x\hm+a_2x^2\hm+...\hm+a_nx^n$ є ізометрією тоді, і тільки тоді, коли коефіціент $a_1$ є непарним 2-адичним числом, сума коефіціентів з парними номерами більше 0 є парним 2-адичним числом та сума коефіціентів з непарними номерами більше 3 є парним 2-адичним числом
   \end{corollary}
   \begin{example}
   Згідно з наслідком \ref{naslidok2} наступні многочлени  є
   ізометріями: $$f(x)=5x+1$$ $$f(x)=x^4+x^2+x$$ $$f(x)=x^5+2x^4+x^3+3x $$
   а многочлени $$f(x)=4x+1$$ $$f(x)=x^3+x^2+x$$ $$f(x)=x^5+x^4+x^3+3x $$ не є
   ізометріями
   \end{example}
  \newpage




 \section{Централізатори шарово-транзитивних елементів в групі скінченно-станових автоморфізмів $FAutT_2$}
Відомо, що централізатори шарово-транзитивних елементів в $AutT_2$ описуються наступною теоремою:
 \begin{theorem}\label{SPTR_centralizer}
   Нехай $x$ - шарово-транзитивний автоморфізм. Тоді
 $$C_{AutT_2}(x)=\{x^p|p\in Z_2\} $$
 \end{theorem}
\
Метою даної роботи є дослідження централізаторів  шарово-транзитивних елементів в $FAutT_2$, оскільки результату,
аналогічного теоремі \ref{SPTR_centralizer} для $FAutT_2$ немає.

\begin{definition}
 Позначимо як:

$x*a$ - ліву дію автоморфізма $a$ на кінець $x$ дерева $T_2$,

$a\circ b$ - суперпозицію автоморфізмів $a$ та $b$ дерева $T_2$,

$Z_2$ - кільце цілих 2-адичних чисел.
\end{definition}

\begin{lemma}\label{nul_epsilon}
Для $p\in Z_2$ має місце рівність:
   $$0*\varepsilon^p=p$$
\end{lemma}
\begin{proof}
Оскільки $t*\varepsilon^p = t+p$, то $0*\varepsilon^p = 0+p = p $.
\end{proof}

\begin{theorem}\label{nul_action_all}
  Нехай $\chi_x$ - 0-розв'язок рівняння спряженості $\varepsilon^t = x$ відносно автоморфізма t. Тоді має місце рівність:
   $$0*x^p=p*\chi_x$$
\end{theorem}
\begin{proof}
Оскільки  $\varepsilon^{\chi_x} = x$, то має місце співвідношення:
$$x^p = (\chi_x^{-1}\circ\varepsilon\circ\chi_x)^p=\chi_x^{-1}\circ\varepsilon^p\circ\chi_x$$
Отже за лемою \ref{nul_epsilon} та рівністю $0*\chi_x = 0$ отримуємо:
$$0*x^p=0*(\chi_x^{-1}\circ\varepsilon^p\circ\chi_x) = ((0*\chi_x^{-1})*\varepsilon^p)*\chi_x) = (0*\varepsilon^p)*\chi_x =  p*\chi_x$$  ч.т.д.
\end{proof}

Має місце наступна лема:
 \begin{lemma} Нехай $x$ - шарово-транзитивний автоморфізм. Тоді
 $$0*C_{AutT_2}(x)=Z_2 $$
  \end{lemma}
  \begin{proof}
За теоремою \ref{SPTR_centralizer} $$C_{AutT_2}(x)=\{x^p|p\in Z_2\}$$ Далі, скориставшись теоремою \ref{nul_action_all}, маємо: $$0*x^{Z_2}=Z_2*\chi_x$$
де  $\chi_x$ - 0-розв'язок рівняння спряженості $\varepsilon^t = x$ відносно автоморфізма t. 

Оскільки $\chi_x$ - автоморфізм, то $$Z_2*\chi_x = Z_2$$ ч.т.д.
  \end{proof}

  \begin{definition}
    Означимо множину $F_p ( p\in Z_2 )$ наступним чином:

$p\in F_p$,

якщо $2t+1\in F_p$, то $t\in F_p, t+1\in F_p $,

якщо $2t\in F_p$, то $t\in F_p $.

Будемо казати, що $t_k$ належить k-му рівню в $F_p$, якщо отримано з $p$ за k кроків.
 \end{definition}

 \begin{definition}
     Означимо множину $P_{m,n} ( m\in \mathbb{Z}, n\in \mathbb{Z}^+\cup 0 )$ наступним чином:

$m\in P_{m,n}$,

якщо $2t+1\in P_{m,n}$, то $t - n\in P_{m,n},\  t+n+1\in P_{m,n} $,

якщо $2t\in P_{m,n}$, то $t\in P_{m,n} $.

Будемо казати, що $t_k$ належить k-му рівню в $P_{m,n}$, якщо отримано з $m$ за k кроків.
 \end{definition}

 \begin{lemma}\label{F_P_equal}
   Нехай  2-адичне квазіперіодичне число  $p$ дорівнює $\frac{m}{2n+1}$, де $ m\in \mathbb{Z}, n\in \mathbb{Z}^+\cup 0$. Тоді множини $P_{m,n}$ та  $F_p $ скінченні або нескінченні одночасно.
 \end{lemma}
 \begin{proof}
Оскільки мають місце рівності:
   $$\frac{2m+1}{2n+1}=2\frac{m-n}{2n+1}+1$$
   $$\frac{2m}{2n+1}=2\frac{m}{2n+1}$$
то в $F_p$ $\frac{2m+1}{2n+1}$ породжує $\frac{m-n}{2n+1}$ та  $\frac{m+n+1}{2n+1}$, а $\frac{2m}{2n+1}$ породжує $\frac{m}{2n+1}$.

Отже, якщо $t_k$ належить k-му рівню в $F_p$, то $t_k(2n+1)$  належить k-му рівню в $P_{m,n}$, і навпаки,  якщо $t_k'$ належить k-му рівню в  $P_{m,n}$, то $\frac{t_k'}{2n+1}$ належить k-му рівню в  $F_p$. Тому має місце рівність:
$$|P_{m,n}| = |F_p|$$
ч.т.д.
 \end{proof}

 \begin{lemma}\label{P_finite}
   Множина $P_{m,n} ( m\in \mathbb{Z}, n\in \mathbb{Z}^+\cup 0 )$ є скінченою.
 \end{lemma}
 \begin{proof}
   Згідно з означенням, якщо $t\in P_{m,n}$, то або $\frac{t}{2}$ або $\frac{t-1}{2}-n$ та $\frac{t-1}{2}+n+1$.Нехай $t_k$
відноситься до $k$-го рівня в $P_{m,n}$, тоді має місце рівність:
$$t_k = \frac{t_{k-1}+a*(2n+1)}{2}, a=0,1,-1$$
Використавши цю рівність k  разів, отримаємо:
$$t_k = \frac{m}{2^k}+(2n+1)(\frac{a_0}{2^k}+\dots+\frac{a_{k-1}}{2})$$
Оскільки $|a_i|\leq 1$, то маємо наступну оцінку:
$$|t_k| = \left| \frac{m}{2^k}+(2n+1)(\frac{a_0}{2^k}+\dots+\frac{a_{k-1}}{2})\right|\leq \left| \frac{m}{2^k}\right|+|2n+1|\leq |m|+2n+1$$
Отже кількість елеметів в множині $P_{m,n}$ обмежено нерівністю:
$$\left|P_{m,n}\right|\leq 2(|m|+2n+1)$$
тому множина $P_{m,n}$ є скінченою, ч.т.д.
 \end{proof}

\begin{lemma}\label{F_finite}
  Множина $F_p$ скінченна тоді, і тільки тоді, коли $p$ - квазіперіодичне число.
\end{lemma}
\begin{proof}

  $\Rightarrow$ Для $2t+1$ та $2t$ число $t$ отримується відкиданням останьої цифри у двійковому запису, отже $F_p$ містить всі числа,  що отримуються з   $p$ відкиданням декількох останніх цифр. Якщо $p$ не квазіперіодичне, то маємо нескінченну кількість таких чисел, тому  $F_p$ не є скінченною.

 $\Leftarrow$ $p$ - квазіперіодичне число тоді і лише тоді, коли $p=\frac{m}{2n+1} (m\in\mathbb{Z}, n\in \mathbb{Z}^+\cup 0)$.
Отже за лемами \ref{F_P_equal} та \ref{P_finite} множина $F_p$  є скінченною.
\end{proof}

 
\begin{theorem}\label{adding_machine_fs_centralizer}
   Нехай $\varepsilon$ - adding machine. Тоді
 $$C_{FAutT_2}(\varepsilon)=\{\varepsilon^p|p\in Z_2 \cap \mathbb{Q}\} $$ 
\end{theorem}
\begin{proof}
  Оскільки має місце рівність
$$C_{FAutT_2}(\varepsilon)=C_{AutT_2}(\varepsilon)\cap FAutT_2$$
то, за теоремою \ref{SPTR_centralizer}, елементи централізатора $C_{FAutT_2}(\varepsilon)$ мають вигляд $\{\varepsilon^p|\varepsilon^p\in FAutT_2\}$. Легко бачити, якщо $p$ - не квазіперіодичне число, то $\varepsilon^p$ - нескінченно-становий, оскільки переводить квазіперіодичне число 0 в не квазіперіодичне число  $p$.
Далі, нехай $p\in Z_2 \cap \mathbb{Q}\}$, тобто квазіперіодичне. За лемою \ref{F_finite}  множина $F_p$ - скінченна. З іншої сторони, мають місце рівності:
$$\varepsilon^{2t+1} = (\varepsilon^t,\varepsilon^{t+1})\circ \sigma$$
$$\varepsilon^{2t} = (\varepsilon^t,\varepsilon^t)$$
Отже стани автоморфізму $\varepsilon^{p}$ вичерпуються автоморфізмами вигляду $$\varepsilon^t, t\in F_p$$ 
Оскільки $F_p$ - скінченна, то $\varepsilon^{p}$ - скінченно-становий автоморфізм, ч.т.д.
\end{proof}

 \begin{theorem} \label{adding_machine_fs_orbite}
Нехай $\varepsilon$ - adding machine. Тоді
 $$0*C_{FAutT_2}(\varepsilon)=(Z_2 \cap \mathbb{Q})$$
  \end{theorem}
  \begin{proof}
За теоремою \ref{adding_machine_fs_centralizer} $$C_{FAutT_2}(\varepsilon)=\{\varepsilon^p|p\in Z_2 \cap \mathbb{Q}\}$$ Далі, скориставшись лемою \ref{nul_epsilon}, маємо: $$0*\varepsilon^{Z_2 \cap \mathbb{Q}}=Z_2 \cap \mathbb{Q}$$
ч.т.д.
  \end{proof}

Теореми \ref{adding_machine_fs_centralizer} та  \ref{adding_machine_fs_orbite}   можна застосувати для дослідження скінченно-станової спряженності
 з автоморфізмом $\varepsilon$ - adding machine. Це показує наступна теорема:

\begin{theorem}
  Якщо 0-розв'язок $t_0$ рівняння спряженності відносно $t$
 $$\varepsilon^t=a$$
 не є скінченно-становим, то це рівняння не має скінченно-станових розв'язків.
\end{theorem}
\begin{proof}
  Припустимо, що $t_0$ - нескінченно-становий, а рівняння $\varepsilon^t=a$ має скінченно-становий розв'язок $t':p\rightarrow 0$, де $p$ - квазіперіодичне число. Оскільки кожен розв'язок єдиним чином можна представити у вигляді $$t' = x\circ t_0, x \in C_{FAutT_2}(\varepsilon)$$ та $p*\varepsilon^{-p}= 0$, то за теоремою \ref{adding_machine_fs_centralizer} $t' = \varepsilon^{-p}\circ t_0 $. Оскільки $t_0$ - нескінченно-становий, а $\varepsilon^{-p}$ - скінченно-становий, то  $t'$ - нескінченно-становий. Отже маємо протиріччя.
\end{proof}

\begin{theorem}\label{include_centralizer}
   Нехай $a$ - шарово-транзитивний автоморфізм. Тоді
 $$C_{FAutT_2}(a) \subseteq \{a^{(p*\chi_{a}^{-1})}|p\in Z_2 \cap \mathbb{Q}\} $$ 
де $\chi_a$ - 0-розв'язок рівняння спряженності $\varepsilon^t=a$ відносно $t$.
 \end{theorem}
\begin{proof}
  Має місце наступна рівність:
$$0*a^{(p*\chi _{a}^{-1})} = p $$ 
Дійсно, за теоремою  \ref{nul_action_all} отримаємо:
$$0*a^{(p*\chi _{a}^{-1})} = (p*\chi_{a}^{-1})*\chi_{a} = p*(\chi_{a}^{-1})\circ \chi_a) = p $$ 
Отже $a^{(p*\chi _{a}^{-1})}$ може бути скінченно-становим тільки тоді, коли $p\in Z_2 \cap \mathbb{Q} $. З іншої сторони
за теоремою \ref{SPTR_centralizer} усі елементи централізатора $C_{AutT_2}(a)$ мають вигляд $a^{(p*\chi _{a}^{-1})}$, оскільки $\chi_a^{-1}$ - автоморфізм $Z_2$. Приймаючи до уваги, що
$$C_{FAutT_2}(a) = C_{AutT_2}(a)\cap FAutT_2$$
отримуємо включення
 $$C_{FAutT_2}(a) \subseteq \{a^{(p*\chi_{a}^{-1})}|p\in Z_2 \cap \mathbb{Q}\} $$ 
ч.т.д.
\end{proof}
 
  \begin{definition} Означимо функцію $h_x:C_{AutZ_2}(x)\rightarrow Z_2$, де $x$ - шарово-транзитивний скінченностановий автоморфізм, наступним чином: $$h_x(u)=0*u$$
 \end{definition}

 Зауважимо, що згідно з означенням

 \begin{theorem} Скінченностановий автоморфізм $x$ є шарово-транзитивним тоді, і тільки тоді, коли
 $h_x:C_{AutT_2}(x)\rightarrow Z_2$ - бієкція.
 \end{theorem}

  \begin{definition}
 Означимо функцію $Log_x:C_{AutZ_2}(x) \rightarrow Z_2$, де $x$ - шарово-транзитивний скінченно-становий автоморфізм, наступним чином: $Log_x(u)=t$ для $u=x^t$.
  \end{definition}

   \begin{theorem} Нехай $x$ - шарово-транзитивний скінченностановий автоморфізм. Тоді
 $$0*C_{FAutT_2}(x)\subseteq(Z_2 \cap \mathbb{Q})$$
 \end{theorem}
 \begin{proof}
   Згідно з теоремою \ref{include_centralizer} маємо включення:
$$0*C_{FAutT_2}(x)\subseteq \{0*a^{(p*\chi_{a}^{-1})}|p\in Z_2 \cap \mathbb{Q}\} = Z_2 \cap \mathbb{Q}$$
 \end{proof}


 \begin{theorem} Нехай $x$ - шарово-транзитивний скінченностановий автоморфізм. Тоді
 $Log_x:C_{AutT_2}(x)\rightarrow Z_2$ - бієкція.
 \end{theorem}

 \begin{hyp} Нехай $x$ - шарово-транзитивний скінченностановий автоморфізм. Тоді
 $$0*C_{FAutT_2}(x)=(Z_2 \cap \mathbb{Q})$$
 \end{hyp}

 \newpage

  \section{Загальні питання спряженності}

  \begin{definition}
 Означимо функцію $\varphi :STAutZ_2\rightarrow STAutZ_2$ наступним чином $\varphi (x)=x_1\circ x_2$, де $x_1,x_2$ визначаються співвідношеням $x=(x_1,x_2)\circ\sigma $
  \end{definition}

  Функція визначена корректно, оскільки, якщо $x=(x_1,x_2)\circ\sigma $ є шарово-транзитивним автоморфізмом кільця $Z_2$, то і $x_1\circ x_2$ є шарово-транзитивним автоморфізмом кільця $Z_2$.

  \begin{definition}
 Означимо функцію $\pi_L:AutZ_2\rightarrow AutZ_2$ наступним чином $\pi_L (x)=x_1$, де $x_1$ визначається співвідношеням $x=(x_1,x_2)$ або $x=(x_1,x_2)\circ\sigma $
  \end{definition}

 \begin{definition}
 Означимо функцію $\pi_R:AutZ_2\rightarrow AutZ_2$ наступним чином $\pi_R (x)=x_2$, де $x_2$ визначається співвідношеням $x=(x_1,x_2)$ або $x=(x_1,x_2)\circ\sigma $
  \end{definition}

  Очевидно, що для шарово-транзитивного автоморфізма $a$ має місце рівність $a=(\pi_L(a),\pi_R(a))\circ\sigma$ і значення $\pi_L(a),\pi_R(a)$ та $\varphi(a)$ зв'язані наступним співвідношенням: $$\varphi(a)=\pi_L(a)\circ \pi_R(a)$$
  Крім того, для автоморфізмів $a=(a_1,a_2),\ b=(b_1,b_2)\circ \sigma$ мають місце наступні співвідношення:
  $$\pi_L(a^{-1})=(\pi_L(a))^{-1},\ \pi_R(a^{-1})=(\pi_R(a))^{-1}$$
  $$\pi_L(b^{-1})=(\pi_R(b))^{-1},\ \pi_R(b^{-1})=(\pi_L(b))^{-1}$$
  $$\pi_L(a\circ b) =\pi_L(a)\circ \pi_L(b),\ \pi_R(a\circ b) =\pi_R(a)\circ \pi_R(b)$$
    $$\pi_L(b\circ a) =\pi_L(b)\circ \pi_R(a),\ \pi_R(b\circ a) =\pi_R(b)\circ \pi_L(a)$$


  \begin{theorem}
   Нехай $a, b$ - шарово-транзитивні скінченно-станові ізометрії кільця $Z_2$, а $\chi_0$ - 0-розв'язок рівняння спряженності $a^{\chi_0}=b$ . Тоді $\forall n \in \mathbb{N}$ має місце рівність $$\varphi^n(a)^{\pi_L^n(\chi_0)}=\varphi^n(b)$$
   \end{theorem}

    \begin{proof} Дійсно, оскільки $a^{\chi_0}=b$, то $\varphi^n(a^{\chi_0})=\varphi^n(b)\ \forall n \in \mathbb{N}$.

 Далі, $$\pi_L(a^{\chi_0})=\pi_L(\chi_0^{-1}\circ a\circ \chi_0)=\pi_L(\chi_0^{-1})\circ \pi_L(a) \circ \pi_R(\chi_0)=(\pi_L(\chi_0))^{-1}\circ \pi_L(a) \circ \pi_R(\chi_0)$$ $$\pi_R(a^{\chi_0})=\pi_R(\chi_0^{-1}\circ a\circ \chi_0)=\pi_R(\chi_0^{-1})\circ \pi_R(a) \circ \pi_L(\chi_0)=(\pi_R(\chi_0))^{-1}\circ \pi_R(a) \circ \pi_L(\chi_0)$$

 Скористаємось методом математичної індукції:

 1) Для n=0 маємо рівність $a^{\chi_0}=b$ і тверження виконується.
 2) Нехай для $n=k$ твердження теореми виконується, тобто $\varphi^k(a)^{\pi_L^k(\chi_0)}=\varphi^k(b)$. Покажемо, що воно також має місце для $n=k+1$ .



 Оскільки $\varphi^{k+1}(b)=\varphi(\varphi^k(b))$, то, згідно з індуктивним припущенням, $$\varphi^{k+1}(b)=\varphi(\varphi^k(a)^{\pi_L^k(\chi_0)})=\pi_L(\varphi^k(a)^{\pi_L^k(\chi_0)})\circ \pi_R(\varphi^k(a)^{\pi_L^k(\chi_0)})$$ і $  \varphi(\varphi^k(a)^{\pi_L^k(\chi_0)}) = ((\pi_L(\pi_L^k(\chi_0)))^{-1}\circ \pi_L(\varphi^k(a)) \circ \pi_R(\pi_L^k(\chi_0)))\circ ( (\pi_R(\pi_L^k(\chi_0)))^{-1}\circ \pi_R(\varphi^k(a)) \circ \pi_L(\pi_L^k(\chi_0)))=(\pi_L(\pi_L^k(\chi_0)))^{-1}\circ ( \pi_L(\varphi^k(a)) \circ \pi_R(\varphi^k(a))) \circ \pi_L(\chi_0)=(\pi_L(\pi_L^k(\chi_0)))^{-1}\circ \varphi(\varphi^k(a)) \circ \pi_L(\pi_L^k(\chi_0))=\varphi(\varphi^k(a))^{\pi_L(\pi_L^k(\chi_0))}=\varphi^{k+1}(a)^{\pi_L^{k+1}(\chi_0)}$, тому має місце рівність $\varphi^{k+1}(a)^{\pi_L^{k+1}(\chi_0)}=\varphi^{k+1}(b)$
 і, згідно з методом математичної індукції, маємо твердження теореми.
 \end{proof}

   \begin{theorem}
   Нехай $a, b$ - шарово-транзитивні скінченно-станові ізометрії кільця $Z_2$. Тоді має місце твердження, що $\chi_0$ - 0-розв'язок рівняння спряженності $a^{\chi_0}=b$ є скінченностановим тоді і тільки тоді, коли $\pi_L^n(\chi_0)$ є скінченностановим для деякого $n \in \mathbb{N}$.
   \end{theorem}



  \begin{corollary}
   Нехай $a, b$ - шарово-транзитивні 0-повні скінченно-станові ізометрії кільця $Z_2$. Тоді  $a$ та $b$ спряженні в $FAutT_2$ тоді, і тільки тоді, коли $\varphi^n(a)$ та $\varphi^n(b)$ спряженні в $FAutT_2$ для деякого $n \in \mathbb{N}$.
   \end{corollary}



   \newpage

\subsection{Спряженність кусково-лінійних шарово-транзитивних автоморфізмів}
 \begin{definition}
 Означимо фактор n-го  рівня шарово-транзитивного автоморфізма $a=(b,c)\circ \sigma$ індуктивно. Фактором 1-го рівня для автоморфізму $a$ называється автоморфізм $b\circ c$. Фактором  n-го  рівня автоморфізма $a$ називається фактор 1-го рівня для фактора (n-1)-рівня автоморфізма $a$ .
 \end{definition}

  \begin{definition}
  Фактор-послідовністью для автоморфізму $a\in AutZ_2$ назвемо послідовність $\{a_n\}$ автоморфізмів, в якій $a_n$ дорівнює фактору n-го рівня для автоморфізму $a$.
 \end{definition}

 \begin{lemma}
 Для довільної кусково-лінійної функції існує n, для якого фактор n-го рівня є лінійною функцією.
 \end{lemma}


 \begin{theorem}Дві шарово-транзитивні скінченно-станові ізометрії 0-спряжені в $FAutT_2$ тоді, і тількі тоді, коли існує рівень, для якого спряжені в $FAutT_2$ їх фактори.
 \end{theorem}



  \begin{theorem}Дві скінченно-станові шарово-транзитивні кусково лінійні функції спряжені в $FAutT_2$ тоді, і тількі тоді, коли вони 0-спряжені в $FAutT_2$.
 \end{theorem}

  \begin{theorem}Дві скінченно-станові шарово-транзитивні кусково лінійні функції спряжені в $FAutT_2$ тоді, і тількі тоді, коли існує рівень, для якого спряжені в $FAutT_2$ лінійні функції їх факторів.
 \end{theorem}

 \section{Спряженість лінійних ізометрій у загальному випадку}

\begin{definition}\label{marked_type_tree_def}
Означимо {\bf розмічене дерево типу } $D_f$ для автоморфізму $f \in AutZ_2$ наступним чином. 
\begin{itemize}
\item Корінь дерева помітимо автоморфізмом $f$.
\item Якщо вершина n-го рівня розміченого дерева типу помічена автоморфізмом $a = (b,c)\circ\sigma$, то з n+1-им рівнем цю вершину з'єднує тільки одне ребро. Іншу вершину цього ребра помітимо автоморфізмом $\pi_L(a)\circ \pi_R(a)$
\item Якщо вершина n-го рівня розміченого дерева типу помічена автоморфізмом $a = (b,c)$, то з n+1-им рівнем цю вершину з'єднує два ребра. Іншу вершину одного ребра помітимо автоморфізмом $\pi_L(a)$, другого ребра -  $\pi_R(a)$.
\end{itemize}
Автоморфізм, що помічає вершину $t\in D_f$ дерева типу позначимо як $D_f(t)$.
Множину вершин n-го рівня дерева $D$ позначимо як $L_n(D)$.
\end{definition}

\begin{remark}\label{child_type_subtree}
За побудовою, піддерево розміченного дерева типу співпадає з розміченним деревом типу автоморфізму, що помічає корінь цього піддерева.
\end{remark}
\begin{lemma}\label{unique_solution_upper_vertex}
Нехай $$a = (a_1,a_2)\circ\sigma, b = (b_1,b_2)\circ\sigma$$ $$a' = a_1\circ a_2 ,b' = b_1\circ b_2 $$ та $a'$ і $b'$ спряжені в $FAutT_2$.

 Тоді $a$ і $b$ також спряжені в $FAutT_2$.
\end{lemma}
\begin{proof}
За умовою леми існує $x\in FAutT2$, такий, що $(a')^x = b' $.

 Покажемо, що $\hat{x} = (x, a_2\circ x \circ c_2^{-1})$ є скінченно-становим розв'язком рівняння спряженності
$$a^\chi = b$$
 Далі
$$(a_1\circ a_2)^x = c_1\circ c_2$$
 і тому % , скориставшись наступними співвідношеннями
% $$(z_1\circ z_2)^{z_1} = z_2\circ z_1 $$
% $$(z_1\circ z_2)^{z_2^{-1}} = z_2\circ z_1 $$
% $$(a_2\circ a_1)^{a_2\circ x\circ c_1} = c_2\circ c_1$$
$$a^{\hat{x}} = (x^{-1}, c_2\circ x^{-1} \circ a_2^{-1}) \circ (a_1,a_2)\circ \sigma \circ (x, a_2\circ x \circ c_2^{-1}) =$$
$$= (x^{-1}\circ a_1 \circ (a_2\circ x \circ c_2^{-1}),(c_2\circ x^{-1} \circ a_2^{-1})\circ a_2 \circ x )\circ \sigma= $$
$$= ((x^{-1}\circ (a_1 \circ a_2)\circ x) \circ c_2^{-1},c_2)\circ \sigma= ((c_1,c_2) \circ c_2^{-1},c_2)\circ \sigma =$$ $$ =(c_1,c_2)\circ \sigma = c $$
Оскільки автоморфізми $x, a_2, c_2$ - скінченно-станові, то і $a_2\circ x \circ c_2^{-1}$ є скінченно-становим. Отже $\hat{x}\in FAutT_2$, щ.т.д.
\end{proof}
\begin{theorem}\label{marked_trees_conj}
Автоморфізми $a$ та $b$ спряжені в $FAutT_2$ тоді, і лише тоді, коли існує ізоморфізм $\alpha$ їх розмічених дерев типу($D_a*\alpha = D_b$), для якого автоморфізми в відповідних вершинах попарно спряжені в $FAutT_2$
$$\forall t\in L_n(D_a), \exists x\in FAutT_2,\ D_a(t)^x= D_b(t*\alpha) $$
\end{theorem}
\begin{proof}
 $\Rightarrow$
Дійсно, нехай $a = (a_1,a_2), b = (b_1,b_2), a^x = b$
Тоді, або $x = (x_1, x_2)$ і маємо
$$a^x = (x_1^{-1},x_2^{-1})\circ (a_1,a_2)\circ (x_1, x_2) = (a_1^{x_1}, a_2^{x_2} ) = (c_1, c_2) $$ і, отже 
$$c_1 = a_1^{x_1} \quad c_2 = a_2^{x_2} $$
 або $x = (x_1, x_2)\circ \sigma$ і маємо
$$a^x = \sigma \circ (x_1^{-1},x_2^{-1})\circ (a_1,a_2)\circ (x_1, x_2) \circ \sigma = \sigma \circ (a_1^{x_1}, a_2^{x_2} )\circ \sigma  = (a_2^{x_2}, a_1^{x_1} )\circ \sigma\circ \sigma = (a_2^{x_2}, a_1^{x_1} )= (c_1, c_2) $$ і, отже 
$$c_1 = a_2^{x_2}  \quad c_2 = a_1^{x_1} $$

Далі, нехай $a = (a_1,a_2)\circ \sigma, b = (b_1,b_2)\circ \sigma, a^x = b$
Тоді, або $x = (x_1, x_2)$ і маємо
$$a^x = (x_1^{-1},x_2^{-1})\circ (a_1,a_2)\circ \sigma \circ (x_1, x_2) = (x_1^{-1}\circ a_1\circ x_2,x_2^{-1}\circ a_2 \circ x_1 )\circ \sigma = (c_1, c_2)\circ \sigma$$ і, отже 
$$c_1 =x_1^{-1}\circ a_1\circ x_2 $$
$$c_2 = x_2^{-1}\circ a_2 \circ x_1 $$
$$c_1\circ c_2 = (a_1\circ a_2)^{x_1} $$
$$c_2\circ c_1 = (a_2\circ a_1)^{x_2} $$

 або $x = (x_1, x_2)\circ \sigma$ і маємо
$$a^x = \sigma \circ (x_1^{-1},x_2^{-1})\circ (a_1,a_2)\circ \sigma \circ (x_1, x_2) \circ \sigma =$$ $$=\sigma \circ  (x_1^{-1}\circ a_1\circ x_2,x_2^{-1}\circ a_2 \circ x_1 )\circ \sigma \circ \sigma =$$ $$= \sigma \circ  (x_1^{-1}\circ a_1\circ x_2,x_2^{-1}\circ a_2 \circ x_1 ) =  $$ $$= (x_2^{-1}\circ a_2 \circ x_1, x_1^{-1}\circ a_1\circ x_2 ) \circ \sigma = (c_1, c_2)\circ \sigma$$ і, отже 
$$c_1 =x_2^{-1}\circ a_2 \circ x_1 $$
$$c_2 = x_1^{-1}\circ a_1\circ x_2 $$
$$c_1\circ c_2 =(a_2\circ a_1)^{x_2} $$
$$c_2\circ c_1 =  (a_1\circ a_2)^{x_1} $$

Згідно з вищезазначеним, відповідні автоморфізми дерева типу спряжені станами автоморфізму $x$.

 $\Leftarrow$ Якщо такий ізоморфізм розміченних дерев типу існує, то автоморфізми, якими помічаются корені цих дерев, спряжені, отже автоморфізми $a$ та $b$ спряжені в $FAutT_2$.

\end{proof}

Зауважимо, що достатньо перевірити спряженність автоморфізмів хоча б одного рівня. Дійсно, згідно з лемою \ref{unique_solution_upper_vertex}, зі спряженності відповідних автоморфізмів $(n+1)$-го рівня випливає спряженність  автоморфізмів $n$-го рівня.  Отже, згідно з  теоремою \ref{marked_trees_conj}, має місце наступна теорема:
\begin{theorem}\label{marked_trees_conj_level}

Автоморфізми $a$ та $b$ спряжені в $FAutT_2$ тоді і лише тоді, коли існує ізоморфізм їх розмічених дерев типу($D_a*\alpha = D_b$), для якого  існує рівень, що всі автоморфізми в відповідних вершинах цього рівня попарно спряжені в $FAutT_2$
$$\exists n\in\mathbb{N}, \forall t\in L_n(D_a), \exists x\in FAutT_2\ D_a(t)^x= D_b(t*\alpha) $$
\end{theorem}
Зауважимо, що оскільки у спряженних автоморфізмів їх дерева типу ізоморфні, то в умові теореми \ref{marked_trees_conj_level} достатньо ізоморфізму $(D_a)_n$ та $(D_b)_n$

\begin{theorem}\label{Spherical_lin_tree}
Дерево типу автоморфізму вигляду $f(x) = ax+b, f \in AutZ_2$ є ланцюгом тоді, і лише тоді, коли $a = 4k+1, b = 2t+1$.
\end{theorem}
\begin{proof}
$\Rightarrow$ Якщо $b = 2t$, то дерево типу для $f$ не є ланцюгом, оскільки
$$(ax+2t) = \left(ax + t, ax + t + \frac{a-1}{2}\right)$$
отже маємо розгалуження в дереві типу $D_f$ на 0-му рівні.

Якщо $a = 4k+3, b = 2t+1$, то
 $$(4k+3)x+(2t+1)) = ((4k+3)x + t, (4k+3)x + t + 1 + 2k+1)\circ \sigma$$
 і 1-й рівень $D_f$ складається з однієї вершини, яка помічена автоморфізмом 
 $$((4k+3)x + t)\circ ((4k+3)x + t + 2k+1) = (4k+3)^2x +t(4k+3)+t+ 1 + 2k+1 =$$
 $$ = (4k+3)^2x +2(2t+1)(k+1) =$$ $$= ((4k+3)^2x +(2t+1)(k+1),(4k+3)^2x +((2t+1)+4(2k+1))(k+1)) $$
отже маємо розгалуження в дереві типу $D_f$ на 1-му рівні.

$\Leftarrow$ 1-й рівень дерева типу автоморфізму вигляду $f(x) = (4k+1)x+(2t+1)$ складається з однієї вершини. Далі:
$$x*\pi_L(f) = (4k+1)x+t$$ $$ x*\pi_R(f) = (4k+1)x+(t+1)+2k $$ 
$$x*\pi_L(f)\circ \pi_R(f) = (4k+1)((4k+1)x+t)+(t+1)+2k =$$
 $$= (4k+1)^2x + (4k+2)t + 2k + 1 = (4k'+1)x+(2t'+1), $$ 
$$k' = 4k^2 + 2k , t' = (2k+1)t + k$$
Отже кожний наступний рівень дерева для цього автоморфізму буде складатись з однієї вершини.
\end{proof}

\begin{lemma}\label{power_2_conj}
Автоморфізми $f(x)=ax+2^n$ та $g(x)=ax+2^n(2b'+1)$ спряжені в $FAutT_2$.
\end{lemma}
\begin{proof}
Дійсно, автоморфізми $f$ та $g$ спряжені за допомогою скінчено-станового автоморфізму $\chi (x) = (2b'+1)x$:
$$\left(\frac{1}{2b'+1}x\right)\circ (ax+2^n)\circ ((2b'+1)x)= \left(\frac{a}{2b'+1}x+2^n\right)\circ ((2b'+1)x)= $$
$$= (2b'+1)\left(\frac{a}{2b'+1}x+2^n\right) = ax + 2^n(2b'+1)$$
\end{proof}

\begin{lemma}\label{lin_states}
Мають місце наступні співвідношення:
$$(2k+1)x+2t = ((2k+1)x+t,(2k+1)x+k+t)$$
$$(2k+1)x+2t+1 = ((2k+1)x+t,(2k+1)x+k+t+1)\circ \sigma$$
\end{lemma}
\begin{proof}
Дійсно, для автоморфізму $f:Z_2\rightarrow Z_2$ вигляду $f = (f_1, f_2)$ маємо
$$f_1 = \frac{f(2x)}{2},\quad f_2 = \frac{f(2x+1)-1}{2}$$
 а для автоморфізму $f:Z_2\rightarrow Z_2$ вигляду $f = (f_1, f_2)\circ\sigma$ маємо
$$f_1 = \frac{f(2x)-1}{2},\quad f_2 = \frac{f(2x+1)}{2}$$
Автоморфізм $ f(x) = (2k+1)x $ має вигляд $$ f = (f_1, f_2) $$ оскільки  залишає першу цифру двійкового розкладу x без зміни.
Отже $$(2k+1)x = ((2k+1)x,(2k+1)x+k)$$
%Крім того, мають місце наступні співвідношення

$$x+2k+1 = (x+k, x+k+1)\circ\sigma$$
Оскільки $f(x)=x+2k$, очевидно, залишає першу цифру двійкового розкладу x без зміни, то
$$\pi_L(x+2k) =  \frac{2x+2k}{2} = x+k, \quad \pi_R(x+2k) =  \frac{2x+1+2k-1}{2} = x+k $$
тому 
$$x+2k = (x+k,x+k)$$
Для  $f(x)=x+2k+1$ маємо:
$$x+2k+1 = (x+2k)\circ (x+1) = (x+k,x+k)\circ (x,x+1)\circ\sigma = (x+k, x+k+1)\circ\sigma $$
Отже
$$(2k+1)x+2t = (2k+1)x\circ(x+2t) =$$ $$=  ((2k+1)x,(2k+1)x+k)\circ  (x+t,x+t)=$$ $$ = ((2k+1)x+t,(2k+1)x+k+t) $$
Аналогічно отримуємо:
$$(2k+1)x+2t+1 = (2k+1)x\circ(x+2t+1) = $$ $$= ((2k+1)x,(2k+1)x+k)\circ  (x+t, x+t+1)\circ\sigma = $$ $$= ((2k+1)x+t,(2k+1)x+k+t+1)\circ\sigma $$
щ.т.д.
\end{proof}
% \begin{theorem}\label{All_lin_tree}
% Для довільного автоморфізму  вигляду $f(x) = (2k+1)x+(2t+1), f \in AutZ_2$ існує натуральне число $N$, таке, що для довільного рівня його розміченного дерева типу, з номером більшим за $N$, кожен автоморфізм, що помічає його вершини, має вигляд $g(x) = (4k'+1)x+t'$ .
% \end{theorem}

\begin{lemma}\label{exist_ax_2b_1}
Для довільного не тотожнього автоморфізму вигляду $f(x) = ax+b, f \in AutZ_2$ знайдеться вершина  його розміченого дерева типу, що помічена автоморфізмом вигляду $g(x) = ax+(2b'+1)$.
\end{lemma}
\begin{proof}
Дійсно, за лемою \ref{lin_states}
$$(2k+1)x+2^nt = ((2k+1)x+2^{n-1}t,(2k+1)x+2^{n-1}t+k) $$ отже, якщо вершина розміченного дерева типу помічена автоморфізмом $(2k+1)x+2^n(2t+1)$, то з цієї вершини виходить дві гілки, і інші їх вершини помічені автоморфізмами $(2k+1)x+2^{n-1}(2t+1)$ та $ (2k+1)x+2^{n-1}(2t+1)+k $. Отже, якщо $b\neq 0$, то рівно за $n$ рівнів знайдеться вершина розміченного дерева типу помічена автоморфізмом $(2k+1)x+(2t+1)$

Якщо $b= 0, k\neq 0$, то $$(2k+1)x = ((2k+1)x,(2k+1)x+k ) $$ і до автоморфізму $(2k+1)x+k $ можна застосувати попередні міркування.
\end{proof}



\begin{theorem}\label{exist_4k_1}
Для довільного не тотожнього автоморфізму  вигляду $f(x) = ax+b, f \in AutZ_2$ знайдеться вершина  його розміченого дерева типу, що помічена автоморфізмом вигляду $g(x) = (4k'+1)x+(2t'+1)$.
\end{theorem}
\begin{proof}
Дійсно, за лемою \ref{exist_ax_2b_1}
знайдеться вершина  розміченого дерева типу, що помічена автоморфізмом вигляду $ax+(2t+1)$.


Оскільки $ax+b$ - ізометрія кільця $Z_2$, то $a = 2k+1$. Далі, з вершини розміченного дерева типу, що помічена автоморфізмом $(2k+1)x+(2t+1)$, виходить одна гілка, інша вершина якої, за лемою \ref{lin_states}, помічена автоморфізмом
 $$((2k+1)x+t)\circ ((2k+1)x+k+t+1)= (2k+1)((2k+1)x+t)+k+t+1 =$$ 
$$= (2k+1)^2x + (2k+1)t+k+t+1 = (4(k^2+k)+1)x + (k+1)(2t+1) =$$ $$= (4k'+1)x+t' $$ 

За лемою \ref{exist_ax_2b_1}, в піддереві розміченого дерева типу з вершиною, поміченною автоморфізмом $ (4k'+1)x+t' $ знайдеться вершина, помічена автоморфізмом $ (4k'+1)x+(2t''+1) $, щ.т.д.
\end{proof}

З теореми \ref{Spherical_lin_tree} та теореми \ref{exist_4k_1} випливає:
\begin{theorem}\label{chain_inside}
 В дереві типу не тотожнього лінійного автоморфізму знайдеться хоча б один ланцюг
\end{theorem}

\begin{definition}\label{vertex_index}
Співставимо кожній вершині дерева типу автоморфізму індекс, що дорівнює кількості розгалужень, починаючи з кореня на шляху до цієї вершини. Наприклад, якщо дерево типу є ланцюгом, то індекс кожної його вершини дорівнює 0.
\end{definition}

\begin{remark}\label{equal_index}
Легко бачити, що для ізоморфізму $\phi : D_1 \rightarrow D_2$ двох дерев типу індекс образу вершини $\phi(x) \in D_2$ дорівнює індексу прообразу вершини $x\in D_1$.
\end{remark}

\begin{lemma}\label{marked_vertex_value}
Для автоморфізму $f(x)=ax+b$ автоморфізм, що маркує вершину n-го рівня розміченного дерева типу має вигляд
$$a^{2^{n-k+1}}x+b'$$
 де k - індекс цієї вершини.
\end{lemma}
\begin{proof}
Дійсно, за лемою \ref{lin_states}
$$(2k+1)x+t = ((2k+1)x+t,(2k+1)x+t+k) $$ отже, якщо вершина розміченного дерева типу помічена автоморфізмом $(2k+1)x+(2t+1)$, то з цієї вершини виходить дві гілки, і інші їх вершини помічені автоморфізмами $(2k+1)x+2^{n-1}(2t+1)$ та $ (2k+1)x+2^{n-1}(2t+1)+k $. Отже при розгалуженні автоморфізми, що маркують вершини наступного рівня мають такий же самий коефіцієнт біля x.

Далі, з вершини розміченного дерева типу, що помічена автоморфізмом $(2k+1)x+(2t+1)$ виходить одна гілка, інша вершина якої, за лемою \ref{lin_states}, помічена автоморфізмом
 $$((2k+1)x+t)\circ ((2k+1)x+k+t+1)= (2k+1)^2x + (2k+1)t+k+t+1 $$ 
Отже в цьому випадку автоморфізм, що маркує вершину наступного рівня має  коефіцієнт біля x, що дорівнює квадрату попереднього коефіцієнту. Отже отримуємо твердження теореми.

\end{proof}

\begin{lemma}\label{minus_coeff_type_tree}
Два не тотожніх лінійних автоморфізми $f(x) = ax+b'$ та $g(x) = -ax+b''$ мають неізоморфні дерева типу.
\end{lemma}
\begin{proof}
Якщо $a$ має вигляд $4k'+1$ то $-a$ має вигляд $4k''+3$ ($-4k'-1 = -4(k'+1)+3$).

Припустимо, що автоморфізми $f$ та $g$ мають ізоморфні дерева типу :
$$D_f*\alpha = D_g$$
За лемою \ref{marked_vertex_value} для довільного $n\in \mathbb{N}$ всі вершини  $n$-го рівня з індексом $n$ в розміченому дереві типу $D_{(4k'+1)x+b}$  помічені автоморфізмами вигляду $(4k'+1)x+b'$.

 Множина таких вершин не є порожньою, оскільки принаймні містить корінь дерева $D_{(4k'+1)x+b}$.

 З іншого боку, оскільки автоморфізм $(4k'+1)x+b$ не є тотожнім, то серед вершин $n$-го рівня з індексом $n$ знайдеться вершина $ v\in D_{(4k'+1)x+b} $, помічена автоморфізмом вигляду $(4k'+1)x+(2t+1)$ (інакше в кожній вершині дерева типу маємо розгалуження, що відповідає тотожньому автоморфізму).

 За теоремою \ref{Spherical_lin_tree} піддерево дерева типу $D_{(4k'+1)x+b}$ з коренем в вершині $v$ є ланцюгом.

 При ізоморфізмі $\alpha$ дерев $D_{(4k'+1)x+b}$ та $D_{(4k''+3)x+c}$  образ $v*\alpha \in D_{(4k''+3)x+c} $ цієї вершини  має такий самий індекс, як і $v$, і, за лемою \ref{marked_vertex_value}, автоморфізм, що помічає вершину  $v*\alpha$, має вигляд 
$ (4k''+3)x+c' $.

 Але, за теоремою \ref{Spherical_lin_tree}, дерево типу автоморфізму  піддерево дерева типу $D_{(4k''+3)x+c}$ з коренем в вершині $v*\alpha$ не є ланцюгом. Отже маємо протиріччя.



\end{proof}

\begin{theorem}\label{lin_conj_rightarrow}
Два  лінійних автоморфізми $f(x) = ax+b$ та $g(x) = cx+d$ можуть бути спряжені лише тоді, коли $a=c$ .
\end{theorem}
\begin{proof}
Нехай автоморфізми $f$ та $g$ спряжені в $FAutT_2$.

За теоремою \ref{chain_inside} в розміченому дереві типу $D_f$ автоморфізму $f$ знайдеться ланцюг. Нехай $v$ - вершина в $D_f$, що належить цьому ланцюгу.
 За лемою \ref{marked_vertex_value} автоморфізм, що маркує цю вершину має вигляд $a^{2^{n-k+1}}x+b'$, де k - індекс вершини $v$, а n - номер рівня, якому вона належить.


Згідно з теоремою \ref{marked_trees_conj},  при ізоморфізмі $\alpha$ дерев типу $D_f$ та $D_g$ автоморфізм $a^{2^{n-k+1}}x+b'$, що маркує вершину $v \in D_f$ спряжений в $FAutT_2$ з автоморфізмом, що маркує вершину $v*\alpha \in D_g$.

Згідно з зауваженням \ref{equal_index} та лемою \ref{marked_vertex_value} автоморфізм, що маркує вершину $v*\alpha \in D_g$  має вигляд $c^{2^{n-k+1}}x+b''$.

 Згідно з зауваженням \ref{child_type_subtree} дерева типу автоморфізмів $a^{2^{n-k+1}}x+b'$ та $c^{2^{n-k+1}}x+b''$ є ланцюгом, а отже є сферично-транзитивними.

 За теоремою про спряженість сферично-транзитивних лінійних  автоморфізмів в $FAutT_2$ маємо рівність  $$ a^{2^{n-k+1}} = c^{2^{n-k+1}} $$
Отже $a = \pm c$, але, оскільки $f$ та $g$ спряжені в $FAutT_2$, то, за лемою \ref{minus_coeff_type_tree}, маємо рівність $a =  c$, щ.т.д.

\end{proof}


\begin{theorem}\label{power_two_lin_conj}
Два лінійних автоморфізми $f(x) = ax+2^r(2b+1)$ та $g(x) = cx+2^r(2d+1)$ спряжені тоді, і лише тоді, коли $a=c$.
\end{theorem}
\begin{proof}
$\Rightarrow$ Нехай f та g - спряжені в $FAutT_2$. За теоремою \ref{lin_conj_rightarrow} - $a=c$.

$\Leftarrow$ Нехай $a=c$. Тоді $ f(x) = ax+2^r(2b+1)$ та $ g(x) = cx+2^r(2d+1)$ спряжені скінчено-становим автоморфізмом $$\chi_0(x) = \left(\frac {2d+1}{2b+1}\right)x$$

Дійсно
$$ \chi_0^{-1}\circ f \circ \chi_0 = \left(\left(\frac{2b+1}{2d+1}\right)x\right) \circ (ax+2^r(2b+1)) \circ  \left(\left(\frac{2d+1}{2b+1}\right)x\right) = $$
$$=  \left(a\left(\frac{2b+1}{2d+1}\right)x+2^r(2b+1)\right) \circ  \left(\left(\frac{2d+1}{2b+1}\right)x\right) = $$
$$= \left(\frac{2d+1}{2b+1}\right)\left(a\left(\frac{2b+1}{2d+1}\right)x+2^r(2b+1)\right) =  ax+2^r(2d+1) = $$
$$ = cx+2^r(2d+1)  $$
\end{proof}
\begin{remark}
За теоремою \ref{lin_conj_rightarrow} автоморфізми $f(x) = ax$ та $g(x) = cx$ спряжені тоді, і лише тоді, коли $a=c$ .
\end{remark}


\begin{theorem}\label{4kp1ConjFinal}
Скінчено-станові автоморфізми $f(x)=(2^s(2k+1)+1)x + b_1$ та $g(x)=(2^s(2k+1)+1)x + b_2$, $s > 0$ спряжені в $FAutT_2$, якщо $ b_1 \equiv b_2 (\mod 2^s) $. 
\end{theorem}
\begin{proof}
Оскільки $ b_1 \equiv b_2 (\mod 2^s) $, то
 $$\frac{b_1-b_2}{2^s(2k+1)}\in Z_2$$

Автоморфізми $f$ та $g$ спряжені в $FAutT_2$ за допомогою скінчено-станового автоморфізму
 $$\chi(x) = x + \frac{b_1-b_2}{2^s(2k+1)}$$ 

Дійсно, має місце наступна рівність:
$$\chi ^{-1}\circ f \circ \chi  = (x - \frac{b_1-b_2}{2^s(2k+1)}) \circ ((2^s(2k+1)+1)x + b_1) \circ (x + \frac{b_1-b_2}{2^s(2k+1)}) =  $$
$$= ((2^s(2k+1)+1)(x - \frac{b_1-b_2}{2^s(2k+1)}) + b_1) \circ (x + \frac{b_1-b_2}{2^s(2k+1)}) = $$
$$ = (2^s(2k+1)+1)x - \frac{(2^s(2k+1)+1 - 1)(b_1-b_2)}{2^s(2k+1)} + b_1 =  (2^s(2k+1)+1)x + b_2 $$

\end{proof}

\begin{lemma}\label{4kp3PowerTwoConj}
Скінчено-станові автоморфізми $f(x)=(4k+3)x + 2b_1$ та $g(x)=(4k+3)x + 2b_2$ спряжені в $FAutT_2$  
\end{lemma}
\begin{proof}
Є наслідком теореми \ref{4kp1ConjFinal}.
\end{proof}

\begin{theorem}\label{4kp3ConjFinal}
Скінчено-станові автоморфізми $f(x)=(4k+3)x + b_1$ та $g(x)=(4k+3)x + b_2$ спряжені в $FAutT_2$ тоді, і лише тоді, коли $ b_1 \equiv b_2 (\mod 2)$ 
\end{theorem}
\begin{proof}
$\Leftarrow$ Згідно з лемою \ref{lin_states}, 1-й рівень дерева типу автоморфізму $ax+(2t+1)$ складається з однієї вершини, а 1-й рівень дерева типу автоморфізму $ax+2t$ складається з двох вершин. Отже автоморфізми  $f(x)=(4k+3)x + b_1$ та $g(x)=(4k+3)x + b_2$ не спряжені в $AutT_2$, а отже і в $FAutT_2$, якщо $ b_1 \not\equiv b_2 (\mod 2)$.


$\Rightarrow$ За теоремою  \ref{power_two_lin_conj}  та лемою \ref{4kp3PowerTwoConj}.
\end{proof}



\begin{theorem}
Автоморфізми $f(x)= x + 2^n$ та $g(x)= x + 2^m$ спряжені в $AutT_2$ тоді, і лише тоді, коли $m=n$. 
\end{theorem}
\begin{proof}
Дійсно, мають місце наступні співвідношення:
$$(x+2^n) = (x+2^{n-1}, x+2^{n-1})$$
$$(x+1) = (x , x+1)\circ \sigma$$
Отже дерево типу автоморфізму $f(x)= x + 2^n$ до n-го рівня ізоморфно $(T_2)_n$ і кожна вершина n-го рівня є коренем ланцюга в дереві типу $D_{x+2^n}$, звідси маємо тверження теореми.
\end{proof}

 \begin{theorem}
 Автоморфізми $f(x)= (2^s(2k+1)+1)x + 2^n, n<s$ та $g(x)= (2^s(2k+1)+1)x + 2^m, m<s$($s>1$) спряжені в $AutT_2$ тоді, і лише тоді, коли $m = n$. 
\end{theorem}
\begin{proof}
За теоремою \ref{Spherical_lin_tree}, дерево типу автоморфізму   $f(x)= (2^s(2k+1)+1)x + 1, s>1$ є ланцюгом.

Далі, має місце співвідношення:
$$( (2^s(2k+1)+1)x+2^n) = ( (2^s(2k+1)+1)x+2^{n-1},  (2^s(2k+1)+1)x+2^{s-1}(2k+1)+2^{n-1} ) = $$
 $$ =  ( (2^s(2k+1)+1)x+2^{n-1},  (2^s(2k+1)+1)x+2^{n-1}((2k+1)2^{s-n}+1 )) $$
Оскільки число $(2k+1)2^{s-n}+1$ - непарне при $n<s$, то, за лемою \ref{power_2_conj} , автоморфізм $(2^s(2k+1)+1)x+2^{s-1}((2k+1)+2^{n-s} )$ спряжен автоморфізму $(2^s(2k+1)+1)x+2^{n-1} $, і вони мають ізоморфні дерева типу.

 Тому, згідно з зауваженням \ref{child_type_subtree}, автоморфізми 
$$( (2^s(2k+1)+1)x+2^{n-1},  (2^s(2k+1)+1)x+2^{s-1}(2k+1)+2^{n-1} )$$
та
$$( (2^s(2k+1)+1)x+2^{n-1},  (2^s(2k+1)+1)x+2^{n-1} )$$
мають ізоморфні дерева типу.

Отже дерево типу автоморфізму $f(x)= (2^s(2k+1)+1)x + 2^n, n<s, s>1$ до n-го рівня ізоморфно $(T_2)_n$ і кожна вершина n-го рівня є коренем ланцюга в дереві типу $D_{(2^s(2k+1)+1)x + 2^n}$, звідси маємо тверження теореми.

\end{proof}

 \begin{lemma}\label{4kp1ConjNull}
 Скінчено-станові автоморфізми $f(x)= (2^s(2k+1)+1)x + 2^n, n<s, s> 1$ та $g(x)= (2^s(2k+1)+1)x $ не спряжені в $AutT_2$. 
\end{lemma}
\begin{proof}
Оскільки має місце співвідношення
$$ (2^s(2k+1)+1)x = ((2^s(2k+1)+1)x, (2^s(2k+1)+1)x + 2^{s-1}(2k+1)  $$
то в дереві типу $D_{(2^s(2k+1)+1)x}$ для довільного n знайдеться вершина n-го рівня, що не є коренем ланцюга - це вершина, помічена автоморфізмом $ (2^s(2k+1)+1)x $.

З іншого боку, кожна вершина n-го рівня є коренем ланцюга в дереві типу $D_{(2^s(2k+1)+1)x + 2^n}$, тому дерева типу $D_{(2^s(2k+1)+1)x + 2^n}$ та $D_{(2^s(2k+1)+1)x}$ не ізоморфні.

 Отже автоморфізми $f(x)= (2^s(2k+1)+1)x + 2^n, n<s, s> 1$ та $g(x)= (2^s(2k+1)+1)x $ не спряжені в $FAutT_2$.
% $\Leftarrow$ Згідно з лемою \ref{lin_states}, 1-й рівень дерева типу автоморфізму $ax+(2t+1)$ складається з однієї вершини, а 1-й рівень дерева типу автоморфізму $ax+2t$ складається з двох вершин. Отже автоморфізми  $f(x)=(4k+3)x + b_1$ та $g(x)=(4k+3)x + b_2$ не спряжені в $AutT_2$, а отже і в $FAutT_2$, якщо $ b_1 \not\equiv b_2 (\mod 2)$.


% $\Rightarrow$ За теоремами  \ref{power_two_lin_conj}  та \ref{4kp3PowerTwoConj}.
\end{proof}


\begin{definition}
Означимо функцію $\phi_a(x)$ наступним чином:
            \begin{equation*}
            \phi_a(b) =
            \begin{cases}
                -n-1, \; a = 1,\; b = 2^n(2t+1) ; \\  
                \; 2^s,\;  a = 2^s(2k+1)+1, s>0, \; b = 0 \\    
                \; (2^n \mod 2^s)+2^s,\; a = 2^s(2k+1)+1, s>0\; b = 2^n(2t+1) ; 
            \end{cases}
            \end{equation*}
          \end{definition}

          \begin{theorem}\label{final_lin_conj}
Два лінійних автоморфізми $f(x) = ax+b$ та $g(x) = cx+d$ спряжені тоді, і лише тоді, коли  $\phi_a(b) = \phi_c(d)$.
\end{theorem}

\begin{definition}\label{part_lin_def1}
Назвемо автоморфізм кусково-лінійним, якщо існує $n\in \mathbb{N}$, для якого всі стани n-го рівня цього автоморфізму є лінійними.
\end{definition}

\begin{remark}\label{All_lin_tree}
Для перевірки спряженості в $FAutT_2$ кусково-лінійних автоморфізмів достатньо застосувати теорему \ref{marked_trees_conj_level} до рівня, на якому усі стани ціх автоморфізмів лінійні,
 та теорему \ref{final_lin_conj} для попарної перевірки спряженості відповідних автоморфізмів, що маркують вершини цього рівня в деревах розміченого типу ціх автоморфізмів.
\end{remark}
 Наприклад, має місце наступна теорема:
\begin{theorem}\label{sph_tr_part_lin_conj}
Два скінчено-станові лінійні сферично-транзитивні  автоморфізми спряжені в $FAutT_2$ тоді, і лише тоді, коли знайдеться рівень, для якого всі автоморфізми цього рівня є лінійними, та добутки всіх коефіцієнтів біля х рівні для обох автоморфізмів.
\end{theorem}

\begin{example}
Кусочно-лінійні сферично-транзитивні автоморфізми $$f(x)= (5x +3 , 9x + 2 )\circ \sigma $$ та  $$g(x)= (15x , 3x+1 )\circ \sigma $$ за теоремою \ref{sph_tr_part_lin_conj} спряжені в $FAutT_2$, оскільки
$$5\cdot 9 = 15\cdot 3$$
\end{example}



 \section{Дифференційовні ізометрії}
\subsection{Кусково-лінійні ізометрії}
\begin{theorem}\label{lin_rational_point}
Скінчено-станова  ізометрія кільця $Z_2$ є
дифференційовною в раціональній точці тоді і лише тоді, коли вона
є лінійною в певному околі цієї точки.
 \end{theorem}

 \begin{proof}Нехай $x$ - кінець дерева $T_2$. $x_{(n)}$ - початок довжини $n$,
 $x^{(n)}$ - хвіст кінця $x$.

 $x=x^{(n)}x_{(n)}$.

 $a$ - скінчено-становий автоморфізм, що відповідає деякій
 скінчено-становій ізометрії. Означимо:
$$F_a(x,y)=\frac{a(x)-a(y)}{x-y}$$

 Дифференційовність ізометріїї $a$ в точці $x$ рівносильно
 існуванню границі в ультраметриці:
 $$\lim_{y\rightarrow x}F_a(x,y)$$

 Нехай $b_0(a,x),b_1(a,x),...,b_n(a,x)...$ -послідовність станів вздовж кінця $x$,
 $b_n(x)=a_{x_{(n)}}$, а $y_0(x),y_1(x),...,y_n(x)...$ -послідовність кінців $y_n(x)=x^{(n)}$.

 Оскільки $a$ - скінчено-становий, а $x$ раціональний, то
 послідовності $b_n(a,x)$ та $y_n(x)$ є квазіперіодичними. Отже послідовність пар
 $(b_n(a,x),y_n(x))$ є квазіперіодичною і існує пара, яка зустрічається нескінчену кількість
 разів. Позначимо її як $(a_c,x_c)$.

 Далі $B(x,r)$ - шар радіусу $r$ з центром в кінці $x$.
  Означимо $D(a,x,r)$ як множину значень $F_a(x,y)$, де $x$ -
  фіксований кінець, а $y\in B(x,r)$:
$$D(a,x,r)=B(x,r)\circ F_a(x,*)$$

Оскільки має місце рівність
$$F_a(x^{(n)}x_{(n)},y^{(n)}x_{(n)})=F_{a_{x^{(n)}}}(x,y)$$
то
$$\exists c \forall r D(a,x,r)\supseteq D(a_c,x_c,1) \ \ \ \ (1)$$

 Отже, згідно з (1) для існування границі $$\lim_{y\rightarrow
x}\frac{a(x)-a(y)}{x-y}$$ необхідно, щоб множина $D(a_c,x_c,1)$
складалась з єдиного елемента, тому
$$\frac{a(x)-a(x_c)}{x-x_c}=const \Rightarrow
a(x)=const*(x-x_c)+a(x_c).$$

 \end{proof}
 \begin{lemma}\label{diff_rational_point}
   Якщо скінченно-станова  ізометрія кільця $Z_2$ є дифференційовною в раціональній точці, то вона є дифференційовною в кожній точці деякого її околу.
 \end{lemma}
 \begin{proof}
   Дійсно, функція, що є лінійною в певному околі є дифференційовною в кожній точці цього околу.
 \end{proof}

 \begin{theorem}\label{sec:-fundtheorem}
Скінченно-станова  ізометрія $f$ кільця $Z_2$ є дифференційовною тоді і лише тоді, коли вона є кусково-лінійною функцією.
 \end{theorem} 
\begin{proof}
   Оскільки ультраметричний простір $Z_2$ є компактним, а множина раціональних 2-адичних чисел є всюди щільною в $Z_2$,  то з покриття околами з теореми~\ref{lin_rational_point} можна виділити скінчене підпокриття. Оскільки простір є ультраметричним, то з цього підпокриття можна виділити підпокриття, що складається з куль, що не перетинаються. На кожній такій кулі ізометрія $f$ є лінійною, отже $f$ - кусково-лінійна функція.
 \end{proof}





  \newpage

 \section{Спряженність транзитивно-стабільних автоморфізмів в $FAutT_2$}
  Відсутність на даний момент необхідної та достатньої умови
  спряженності автоморфізмів в групі скінченно-автоматних підстановок
  примушує при дослідженні рівняння спряженності використовувати певні
  достатні умови( Наприклад, шарово-транзитивні автоморфізми $a$ та
  $b$ не спряжені, якщо фактор-послідовність для $a$ періодична, а для
  $b$ - не періодична, або - якщо  $a$ та $b$  мають різний ріст).
  Стабільно-транзитивні автоморфізми дуже близьки по своїх
  властивостях один до одного, тому цілий клас достатніх умов є не
  еффективним при дослідженні питання спряженності таких
  автоморфізмів. В роботі пропонується підхід, що дозволяє побудувати
  перетин класу спряженності в групі скінченно-автоматних підстановок,
  що містить автоморфізм adding machine, з множиною транзитивно
  стабільних автоморфізмів.
\begin{definition}
   Означимо фактор n-го рівня шарово-транзитивного автоморфізма
   $$a=(b,c)\circ \sigma$$ індуктивно. Фактором 1-го рівня для
   автоморфізму $a$ называється автоморфізм $b\circ c$. Фактором n-го
   рівня автоморфізма $a$ називається фактор 1-го рівня для фактора
   (n-1)-рівня автоморфізма $a$ .
 \end{definition}
  \begin{definition}
    Фактор-послідовністью для автоморфізму $a\in AutZ_2$ назвемо
    послідовність $\{a_n\}$ автоморфізмів, в якій $a_n$ дорівнює
    фактору n-го рівня для автоморфізму $a$.
 \end{definition}
 \begin{definition}
   Назвемо автоморфізм $x~\in~AutT_2$ транзитивно-стабільним, якщо
   фактор-послідовність для цього автоморфізму є стаціонарною.
 \end{definition}
 Рекурсивно означимо множини $W_x$ та $R_x$ для шарово-транзитивного
 автоморфізму $x\in AutT_2$.
 \begin{definition}
   Тотожній автоморфізм $id$ належить $W_x$. Нехай автоморфізм
   $t=(t_1,t_2)$ або автоморфізм $t=(t_1,t_2)\circ \sigma$ належить
   $W_x$. Тоді автоморфізм $x\circ t_2$ належить $W_x$.
 \end{definition}
 \begin{definition}
   Тотожній автоморфізм $id$ належить $R_x$. Нехай автоморфізм
   $t=(t_1,t_2)$ або автоморфізм $t=(t_1,t_2)\circ \sigma$ належить
   $R_x$. Тоді автоморфізми $t_1$ та $x\circ t_2$ належать $R_x$.
 \end{definition}
 Легко бачити, що $W_x$ належить $R_x$.
 \begin{example} \label{exeps} Обчислимо множини $W_{\varepsilon}$ та
   $R_{\varepsilon}$ для автоморфізма adding machine, що задається
   співвідношенням $\varepsilon=(id,\varepsilon)\circ \sigma$.

   Обчислимо $W_{\varepsilon}$.  Згідно рекурсивної процедури разом з
   $id$ множині $W_{\varepsilon}$ належить автоморфізм
   $\varepsilon$. Далі з $\varepsilon$ отримаємо $\varepsilon^2$, з
   $\varepsilon^2$ отримаємо $\varepsilon^2$. Зрозуміло, що більше
   ніяких автоморфізмів в множині $W_{\varepsilon}$ не має. Отже
   $W_{\varepsilon}$ складається з автоморфізмів $id,\ \varepsilon$ та
   $\varepsilon^2$.

   Обчислимо $R_{\varepsilon}$.  Згідно рекурсивної процедури разом з
   $id$ множині $R_{\varepsilon}$ належать автоморфізми $id$ та
   $\varepsilon$. Далі з $\varepsilon$ отримаємо $id$ та
   $\varepsilon^2$, з $\varepsilon^2$ отримаємо $\varepsilon$ та
   $\varepsilon^2$. Зрозуміло, що більше ніяких автоморфізмів в
   множині $R_{\varepsilon}$ не має. Отже $R_{\varepsilon}$
   складається з автоморфізмів $id,\ \varepsilon$ та $\varepsilon^2$.

 \end{example}
 \begin{definition}
   Назвемо автоморфізм $x \in AutT_2$ регулярним, якщо множина $R_x$ -
   скінченна.
 \end{definition}

 \begin{definition}
   Назвемо автоморфізм $x \in AutT_2$ слабко регулярним, якщо множина
   $W_x$ - скінченна.
 \end{definition}

 Оскільки $W_x$ належить $R_x$, то регулярний автоморфізм є слабко
 регулярним. Згідно з прикладом $\ref{exeps}$ автоморфізм adding
 machine $\varepsilon$ є регулярним.
 \begin{lemma}
   Автоморфізм $b\in AutT_2$ є транзитивно-стабільним тоді, і тільки
   тоді, коли знайдеться $t\in AutT_2$, такий, що $b=(t,t^{-1}\circ
   b)\circ \sigma$
 \end{lemma}
 \begin{proof}
   $\Rightarrow$\hskip 1em 
Нехай $b = (t,l)\circ\sigma$. Оскільки $b$ - транзитивно-стабільний, то $b =
   t\circ l$, отже $l = t^{-1}\circ b$.

   $\Leftarrow$\hskip 1em 
$b=(t,t^{-1}\circ b)\circ \sigma$. Оскільки $t\circ
   t^{-1}\circ b = b$, то $b$ - транзитивно-стабільний.
 \end{proof}
 \begin{theorem}
\label{zero_solution}
   Нехай $b$ - транзитивно-стабільний автоморфізм, що задається
   співвідношенням $b=(t,t^{-1}\circ b)\circ \sigma$. Тоді
   0-розв'язком рівняння $\varepsilon^{\chi}=b$ є автоморфізм, що
   задається співвідношенням $a=(a,a\circ t)$
 \end{theorem}
 \begin{proof}
Зауважимо, що для автоморфізму $a=(a,a\circ t)$
 $$...000*a = ...000$$
 Дійсно, $$x0*(a,b)=(x*a)0$$ 
 Далі маємо
   \begin{eqnarray*}
\label{eqn}
    a^{-1}\circ \varepsilon \circ a = (a,a\circ t)^{-1}\circ\varepsilon\circ (a,a\circ t)=\\
=(a^{-1},t^{-1}\circ a^{-1}) \circ (id, \varepsilon)\circ \sigma \circ (a,a\circ t)=\\
=(a^{-1},t^{-1}\circ a^{-1}) \circ (id, \varepsilon)\circ (a\circ t, a) \circ \sigma =\\
 = (t, t^{-1}\circ (a^{-1}\circ \varepsilon \circ a))\circ \sigma
   \end{eqnarray*}

   Оскільки для шарово-транзитивних, а отже і для
   стабільно-транзитивних автоморфізмів $\alpha$ та $\beta$,
   0-розв'язок рівняння $\alpha^{\chi}=\beta$ існує і єдиний, то,
   згідно з зауваженням та отриманною рівністю, автоморфізм
   $a=(a,a\circ t)$ є 0-~розв'язком рівняння $\varepsilon^{\chi}=b$.
  \end{proof}

  Природнім є питання, при яких $t$ автоморфізм $a=(a,a\circ t)$ є
  скінченно-становим. Умова скінченно-становості автоморфізму $t$ є
  необхідною. Дійсно, оскільки автоморфізм $a$ є скінченно-становим,
  то його права проекція $\pi _R(a)=a\circ t$ є скінченно-становим
  автоморфізмом, і тому автоморфізм $$t = a^{-1}\circ (a\circ t) =
  a^{-1}\circ \pi _R(a) $$ також є скінченно-становим. Але ця умова не
  є достатньою. Це показують наступні теорема та приклад:

  \begin{theorem}
    \label{aat}
    Автоморфізм $a=(a,a\circ t)$ є скінченно-становим тоді, і тільки
    тоді, коли t - регулярний.
  \end{theorem}
  \begin{proof}
    Нехай $\pi_L(a) $ ліва, а $\pi_R(a)$ - права проекція автоморфізму $a=(a,a\circ t)$ . Тоді мають місце рівності:
$$\pi_L(a\circ f) = a \circ \pi_L(f)$$ 
$$\pi_R(a\circ f) = a \circ (t \circ \pi_R(f))$$ 
Тобто станами автоморфізму $a$ є автоморфізми вигляду $\{a\circ x |
x\in R_t\}$. Тому $a$ є скінченно-становим тоді, і тільки тоді, коли
множина $R_t$ є скінченною.
  \end{proof}
  \begin{example}
    \label{exmpl_a3x}
    Автоморфізм $a=(a,a\circ 3x)$ не є скінченно-становим.
 
    Покажемо, що множина $W_{3x}$ - нескінченна. Дійсно, вона містить
    нескінченну кількість автоморфізмів вигляду $3^nx+c_n$. Отже
    автоморфізм $x*t = 3x $ є скінченно-становим( зі станами
    $3x,3x+1,3x+2$), але не є слабко-регулярним, тому не є і
    регулярним. За теоремою \ref{aat} автоморфізм $a=(a,a\circ 3x)$-
    нескінченно-становий.
 \end{example}

 Наслідком теорем \ref{zero_solution} та \ref{aat} є наступна теорема:
    \begin{theorem}
      \label{SprStTr}
      Нехай $b$ - транзитивно-стабільний автоморфізм, автоморфізм t -
      ліва проекція автоморфізма $b$.  Автоморфізми $\varepsilon$ та
      $b$ спряженні в $FAutT_2$ тоді, і тільки тоді, коли t -
      регулярний.
    \end{theorem}

Далі сформулюємо крітерій скінченно-становості для транзитивно-стабільних автоморфізмів.
  \begin{theorem}
    \label{week_regular_fs}
    Нехай $b$ - транзитивно-стабільний автоморфізм, автоморфізм t -
    ліва проекція автоморфізма $b$.  Автоморфізм $b$ є
    скінченно-становим тоді, і тільки тоді, коли t - слабко
    регулярний.
  \end{theorem}
   \begin{proof}
     Очевидно $b$ та $b^{-1}$ мають однакову кількість
     станів. Покладемо $$b' = b^{-1}=(b^{-1}\circ t, t^{-1})\circ \sigma$$
Кожен стан $b'$ з вершиною, що належить кінцю ...000 має вигляд
$$b'\circ x\ |\ x\in W_t$$ Якщо множина $W_t$ - скінчена, то інші стани мають вигляд
, $$t^{-1}\circ t_1 \circ ... \circ t_N$$ (де $t_i$ є підстанами
автоморфізму $t$ і кількість доданків обмежена деяким натуральним $N$,
що залежить від $|W_t|$), або є підстанами таких станів.

Отже $b$ є скінченно-становим тоді, і лише тоді, коли множина $W_t$ є скінченою.

   \end{proof}
  
  Як було зауважено регулярний автоморфізм є слабко регулярним. Цікаво
  отримати приклад слабко регулярного автоморфізму, який не є
  регулярним. Згідно з теоремами \ref{SprStTr} та \ref{week_regular_fs} такий автоморфізм
  дозволяє побудувати приклад скінченно-станового
  стабільно-транзитивного автоморфізму, що не є спряженим з adding
  machine в $FAutT_2$. Побудувати слабко регулярний автоморфізм, який
  не є регулярним дозволяє наступна теорема.

  \begin{theorem}
    \label{week_regular}
    Скінченно-становий автоморфізм $t=(t_1,t_2)$ є слабко регулярним
    тоді і тільки тоді, коли автоморфізм $t_2$ є слабко регулярним.
  \end{theorem}
  \begin{proof}
    Достатньо звернути увагу на те, що:
$$ W_t=\{id,t, t\circ t_2,...\} = id \cup \{t\circ x | x \in W_{t_2}\}$$
Тобто множини $W_t$ та $W_{t_2}$ скінченні або нескінченні одночасно.
  \end{proof}

 %  \begin{theorem}
% \label{regular}
%     Якщо автоморфізм $t_1$ не є регулярним, то автоморфізм
%     $t=(t_1,t_2)$ не є регулярним.
%   \end{theorem}
%   % \begin{proof}
    
%   % \end{proof}

%   Отже, згідно з теоремами \ref{week_regular} та \ref{regular}
%   прикладом слабко регулярного автоморфізму, який не є регулярним, є
%   автоморфізм з не регулярною лівою проекцією( яка може також не бути
%   слабко регулярною), та слабко регулярною правою проекцією.

  \begin{example}
    Згідно з прикладом \ref{exmpl_a3x} автоморфізм $t':x \rightarrow 3x$ не є
    регулярним, автоморфізм $id$ є слабко регулярним. Тому автоморфізм
    $t = (3x, id)$ є слабко-регулярним автоморфізмом, що не є
    регулярним. 

    Маємо приклад двох транзитивно-стабільних скінченно-станових
    автоморфізмів не спряженних в $FAutT_2$:
$$\varepsilon=(id,\varepsilon)\circ \sigma$$
$$b=((3x,id),(\frac{1}{3}x,id)\circ b)\circ \sigma$$

  \end{example}
Сформулюємо основний результат:

  Перетин множини транзитивно-стабільних автоморфізмів з класом
  спряженності в групі скінченно-станових автоморфізмів, що містить
  adding machine, складається з транзитивно-стабільних автоморфізмів з
  регулярною лівою проекцією.


  \section{Зв'язка груп}
 Сформулюємо твердження, за допомогою яких буде побудована конструкція зв'язки двох груп.
  \begin{description}
\item[$A1.$] $ a * b=f_b(a) \circ b$
\item[$A2.$] $(G,\circ) $ - група
\item[$A3.$] $(G,*) $ - напівгрупа ($A3a.\ (G,*) $ - група)
\item[$A4.$] $ f_a(f_b(c))=f_{b * a}(c)$
\item[$A5.$] $ f_c(a \circ b)=f_c(a) \circ f_c(b)$

\end{description}

Сформулюємо твердження $$T1.\ f_c(f_b(a)\circ b)\hm=f_{b*c}(a)\circ f_c(b)$$ та $$T1a.\ f_c(f_b(a)\circ b)\hm=f_{f_c(b)\circ c}(a)\circ f_c(b)$$

\begin{theorem}
$ A1,A2,A3\vdash T1$

\end{theorem}

\begin{proof}

\begin{tabular}{|c|c|c|}
\hline
1 & $(a*b)*c=a*(b*c)$ & $A3$\\
\hline

2 & $f_c(f_b(a)\circ b)\circ c=f_{b*c}(a)\circ (f_c(b)\circ c)$& $A1, 1$\\
\hline

3 & $f_c(f_b(a)\circ b)=f_{b*c}(a)\circ f_c(b)$& $2, A2$\\
\hline
\end{tabular}

\end{proof}

\begin{theorem}
$ A1,A2,T1\vdash A3$

\end{theorem}

\begin{proof}

\begin{tabular}{|c|c|c|}
\hline
1 & $f_c(f_b(a)\circ b)=f_{b*c}(a)\circ f_c(b)$& $T1$\\
\hline

2 & $f_c(f_b(a)\circ b)\circ c=f_{b*c}(a)\circ (f_c(b)\circ c)$& $A2, 1$\\
\hline

3 & $(a*b)*c=a*(b*c)$ & $A1, 2$\\
\hline
\end{tabular}

\end{proof}

\begin{theorem}
$ A2,A5,T1\vdash A4$

\end{theorem}

\begin{proof}

\begin{tabular}{|c|c|c|}
\hline
1 & $f_c(f_b(a)\circ b)=f_{b*c}(a)\circ f_c(b)$& $T1$\\
\hline

2 & $f_c(f_b(a))\circ f_c(b)=f_{b*c}(a)\circ f_c(b)$& $A5, 1$\\
\hline

3 & $ f_a(f_b(c))=f_{b * a}(c)$ & $A2, 2$\\
\hline
\end{tabular}

\end{proof}

\begin{theorem}
$ A1,A2,A5,A3\vdash  A4$

\end{theorem}

\begin{proof}

\begin{tabular}{|c|c|c|}
\hline
1 & $f_c(f_b(a)\circ b)=f_{b*c}(a)\circ f_c(b)$& $T1$\\
\hline

2 & $f_c(f_b(a))\circ f_c(b)=f_{b*c}(a)\circ f_c(b)$& $A5, 1$\\
\hline

3 & $ f_a(f_b(c))=f_{b * a}(c)$ & $A2, 2$\\
\hline
\end{tabular}

\end{proof}

\begin{theorem}
$ A1,A2,A5,A4\vdash  A3$

\end{theorem}

Сформулюємо твердження $T2:\forall b \ f_b(x) -$ сюр'єкція.

\begin{theorem}
$ A1,A2,A3,A4,T2\vdash  A5$

\end{theorem}






  \begin{example}
   \fbox{$a \circ b=f_b(a)\hat{\circ} b$} - приклад зв'язки відомих конструкцій множення та антимноження

   $ \circ_1 \sim \hat{\circ}, \circ_2 \sim \circ $

   $a \circ b$ - множення в групі

   $a \hat{\circ} b= b \circ a$ - антимноження в групі

   $f_a(b)=a^{-1} \circ b \circ a$



   \end{example}

  \begin{example}
  \fbox{$a\hat{\circ} b=f_b(a) \oplus b$} - приклад визначення множення автоморфізмів на портретах за допомогою простої операції додавання портретів за модулем 2

  $ \circ_1 \sim \oplus , \circ_2 \sim \hat{\circ} $

   $a \oplus b$ - додавання по модулю 2 портретів автоморфізмів $a$ та $b$

   $a \hat{\circ} b= b \circ a$ - антимноження в групі автоморфізмів

   $f_a(b)$ - перестановка кінців портрету автоморфізму $a$ під дією автоморфізму $b^{-1}$

   \end{example}
 \begin{example}
 \fbox{$a*b=f_b(a) \circ b$}

 $ \circ_1 \sim \circ , \circ_2 \sim * $





   $a \circ b$ - множення в групі автоморфізмів

   Означимо функцію $g$ на множині автоморфізмів вигляду $a=(a,a \circ t)$ наступним чином $g(a)=a^{-1} \circ \pi_R(a)=t$

   $a * b=g(g^{-1}(a)\circ g^{-1}(b))$

   $f_a(b)=(g^{-1}(a))^{-1}\circ b \circ g^{-1}(a)=b^{g^{-1}(a)}$



   \end{example}

    \begin{example}
 \fbox{$a*b=(a+1)\cdot b +a=a\cdot b+a+b$}

 $ \circ_1 \sim + , \circ_2 \sim * $





   $a + b$ - додавання дійсних чисел

    $a * b$ - асоціативна операція на множині дійсних чисел



   $f_a(b)=(a+1)\cdot b$



   \end{example}












\begin{thebibliography}{2}



\end{thebibliography}








  \end{document}
